<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A.P.T í•‘</title>

<link rel="stylesheet" th:href="@{/css/font.css}" />
<link rel="stylesheet" th:href="@{/css/sidebar.css}">
<!-- Favicon -->
<link rel="icon" href="/icons/favicon.png" type="image/png">
<!-- ì¶”ê°€ -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#61AFFE">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="A.P.T í•‘">
<style>
/* ê¸°ì¡´ body ìŠ¤íƒ€ì¼ì„ flexbox sticky footerë¥¼ ìœ„í•´ ìˆ˜ì • */
body {
    background-color: #fdfdfd;
    margin: 0;
    padding: 0;
    display: flex; /* Flexbox ì»¨í…Œì´ë„ˆë¡œ ì„¤ì • */
    flex-direction: column; /* ìì‹ ìš”ì†Œë“¤ì„ ì„¸ë¡œë¡œ ë°°ì—´ */
    min-height: 100vh; /* ë·°í¬íŠ¸ ì „ì²´ ë†’ì´ë¥¼ ì°¨ì§€í•˜ë„ë¡ */
    box-sizing: border-box;
}

/* main-wrapper ì¶”ê°€: í‘¸í„°ê°€ ì•„ë˜ë¡œ ë°€ë¦¬ë„ë¡ ë‚¨ì€ ê³µê°„ì„ ì±„ì›€ */
.main-wrapper {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    flex-grow: 1; /* ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ê³µê°„ì„ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    padding-top: 50px; /* ìƒë‹¨ ì—¬ë°± (ê¸°ì¡´ bodyì—ì„œ ì´ë™) */
    width: 100%; /* ë„ˆë¹„ ì„¤ì • */
}

.container {
    width: 90%;
    max-width: 1000px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
    padding: 40px;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    align-items: center; /* ì¤‘ì•™ ì •ë ¬ */
    margin-top: 170px; /* ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ë§ˆì§„ ìœ ì§€ (ì‚¬ì´ë“œë°”ì™€ì˜ ê´€ê³„ ê³ ë ¤) */
    /* background-color: #fff; ì´ ë¶€ë¶„ì€ ì´ë¯¸ì§€ì— ì—†ìœ¼ë‹ˆ ì œê±° */
}

/* ê¸°ì¡´ header ìŠ¤íƒ€ì¼ ìœ ì§€ */
header {
    width: 100%;
    display: flex;
    justify-content: flex-start; /* ì™¼ìª½ ì •ë ¬ */
    margin-bottom: 30px;
}

/* ê¸°ì¡´ main-content ìŠ¤íƒ€ì¼ ìœ ì§€ */
.main-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: flex-start;
    width: 100%;
}

/* ê¸°ì¡´ left-section, right-section, action-button, img, h1, p ìŠ¤íƒ€ì¼ ìœ ì§€ */
.left-section {
    flex: 2;
    min-width: 300px;
    padding-right: 30px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.left-section h1 {
    font-size: 36px;
    color: #61AFFE;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.left-section .service-icon {
    width: 100px;
    height: 100px;
    vertical-align: middle;
    margin-bottom: 0px;
    margin-left: 10px;
}

.left-section p {
    font-size: 18px;
    line-height: 1.8;
    color: #292929;
    font-weight: 500;
    max-width: 450px;
    text-align: left;
    white-space: nowrap;
}

.right-section {
    flex: 1;
    min-width: 250px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    align-items: center;
    margin-top: 60px;
}

.action-button {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    height: 70px;
    max-width: 280px;
    padding: 18px 30px;
    background-color: #fff;
    border-radius: 12px;
    font-size: 22px;
    font-weight: 700;
    color: #292929;
    text-decoration: none;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
}

.action-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
    color: #61AFFE;
}

.action-button img {
    width: 50px;
    height: 50px;
    margin-left: 15px;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media ( max-width : 768px) {
    .container {
        padding: 30px;
    }
    .main-content {
        flex-direction: column;
        align-items: center;
    }
    .left-section {
        padding-right: 0;
        margin-bottom: 40px;
    }
    .left-section p {
        text-align: center;
    }
    .right-section {
        width: 100%;
        max-width: 350px;
    }
    .main-wrapper {
        padding-top: 30px; /* ëª¨ë°”ì¼ì—ì„œ ìƒë‹¨ ì—¬ë°± ì¤„ì´ê¸° */
    }
}

@media ( max-width : 480px) {
    .left-section h1 {
        font-size: 14px;
    }
    .left-section .service-icon {
        width: 60px;
        height: 60px;
    }
    .left-section p {
        font-size: 14px;
    }
    .action-button {
        font-size: 14px;
        padding: 15px 20px;
    }
    .action-button img {
        width: 35px;
        height: 35px;
    }
}

/* í‘¸í„° ìŠ¤íƒ€ì¼ */
footer {
    background-color: #f2f2f2;
    padding: 15px 0;
    text-align: center;
    font-size: 14px;
    color: #666;
    width: 100%; /* ë„ˆë¹„ë¥¼ 100%ë¡œ ì„¤ì • */
    flex-shrink: 0; /* í‘¸í„°ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ì„¤ì • */
    margin-top: auto; /* í•µì‹¬: ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•œ ë’¤ í‘¸í„°ë¥¼ ë°”ë‹¥ìœ¼ë¡œ ë°€ì–´ëƒ„ */
}
</style>
</head>
<body>
    <div th:replace="common/sidebar :: sidebar"></div>

    <div class="main-wrapper">
        <div class="container">
            <div class="main-content">
                <div class="left-section">
                    <h1>
                        A.P.T í•‘ <img src="/icons/ping_icon.png" alt="A.P.T í•‘ ì•„ì´ì½˜"
                            class="service-icon">
                    </h1>
                    <p>
                        <b>A.P.Tí•‘</b>ì€ ìš°ë¦¬ ë™ë„¤ì˜ ì†Œì‹ì„ ë¹ ë¥´ê³  ì‰½ê²Œ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤!<br> ì ˆì•½ ì±Œë¦°ì§€ì—ì„œ ìŒ“ì€
                        í¬ì¸íŠ¸ë¡œ ì´ìš©í•  ìˆ˜ ìˆê³ (íšŒë‹¹ 300í¬ì¸íŠ¸ ì°¨ê°),<br> íšŸìˆ˜ ì œí•œê³¼ ê¸ˆì¹™ì–´ í•„í„°ë§ ê¸°ëŠ¥ì„ í†µí•´ ë” ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆì–´ìš”.<br>
                        ì—¬ëŸ¬ë¶„ ë™ë„¤ ì†Œì‹, <b>A.P.Tí•‘</b>ìœ¼ë¡œ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”! âœ¨ğŸ 
                    </p>
                </div>

                <div class="right-section">
                    <a href="#" class="action-button" id="subscribeButton"> êµ¬ë… ì„¤ì • <img
                        src="/icons/ping_subsc.png" alt="êµ¬ë… ì•Œë¦¼ ì•„ì´ì½˜">
                    </a>
                    <a th:href="@{communityPingSend}" class="action-button"> ì•Œë¦¼
                        ë³´ë‚´ê¸° <img src="/icons/ping_send.png" alt="ì±„íŒ… ë²„ë¸” ì•„ì´ì½˜">
                    </a>
                </div>
            </div>
        </div>
    </div> 
    
    <footer>
        <div>
            <p style="margin: 0;">Â© 2025 A.P.T. All rights reserved.</p>
            <p style="margin: 5px 0 0;">
                Made with <span class="computer-icon">ğŸ’»</span> by íŒ€ EF
            </p>
        </div>
    </footer>
    
    <script>
    	document.getElementById('subscribeButton').addEventListener('click', function(e) {
        e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ë°©ì§€

        const popupUrl = 'communitySubscribeSetting';
        const popupName = 'aptPingSubscribeSettings';

        // í˜„ì¬ ë¸Œë¼ìš°ì € ë·°í¬íŠ¸ì˜ ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        // ìŠ¤í¬ë¡¤ë°”ë¥¼ í¬í•¨í•œ ì‹¤ì œ ì½˜í…ì¸  ì˜ì—­ì˜ í¬ê¸°ì…ë‹ˆë‹¤.
        const browserWidth = window.innerWidth;
        const browserHeight = window.innerHeight;

        // íŒì—… ì°½ì˜ ì›í•˜ëŠ” ë¹„ìœ¨ ì„¤ì • (ì˜ˆ: í˜„ì¬ ì°½ ë„ˆë¹„ì˜ 40%, ë†’ì´ì˜ 80%)
        const popupWidthPercentage = 0.4; // 40%
        const popupHeightPercentage = 0.8; // 80%

        // íŒì—… ì°½ì˜ ì‹¤ì œ í”½ì…€ í¬ê¸° ê³„ì‚°
        const calculatedWidth = Math.round(browserWidth * popupWidthPercentage);
        const calculatedHeight = Math.round(browserHeight * popupHeightPercentage);

        // íŒì—… ì°½ì„ í™”ë©´ ì¤‘ì•™ì— ë„ìš°ê¸° ìœ„í•œ left, top ìœ„ì¹˜ ê³„ì‚°
        // (í˜„ì¬ ë¸Œë¼ìš°ì € ë„ˆë¹„ - íŒì—… ë„ˆë¹„) / 2
        const leftPosition = Math.round((browserWidth - calculatedWidth) / 2);
        // (í˜„ì¬ ë¸Œë¼ìš°ì € ë†’ì´ - íŒì—… ë†’ì´) / 2
        const topPosition = Math.round((browserHeight - calculatedHeight) / 2);


        // popupFeatures ë¬¸ìì—´ ìƒì„±
        // width, height ì™¸ì— leftì™€ top ì†ì„±ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
        const popupFeatures = `width=${calculatedWidth},height=${calculatedHeight},left=${leftPosition},top=${topPosition},scrollbars=no,resizable=no,location=no,menubar=no,toolbar=no,status=no`;

        // ìƒˆ ì°½ íŒì—… ì—´ê¸°
        const subscribeWindow = window.open(popupUrl, popupName, popupFeatures);

        // íŒì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì—´ë ¸ëŠ”ì§€ í™•ì¸
        if (subscribeWindow) {
            subscribeWindow.focus(); // íŒì—…ì— í¬ì»¤ìŠ¤ ì£¼ê¸°
        } else {
            alert('íŒì—… ì°½ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì˜ íŒì—… ì°¨ë‹¨ì„ í•´ì œí•´ì£¼ì„¸ìš”.');
        }
    });

	// PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
	if ('serviceWorker' in navigator) {
	    window.addEventListener('load', function() {
	        navigator.serviceWorker.register('/sw.js')
	            .then(function(registration) {
	                console.log('âœ… PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì„±ê³µ');
	            })
	            .catch(function(error) {
	                console.log('âŒ PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì‹¤íŒ¨:', error);
	            });
	    });
	}

	// PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
	let deferredPrompt;
	window.addEventListener('beforeinstallprompt', function(e) {
	    e.preventDefault();
	    deferredPrompt = e;
	    
	    // ì„¤ì¹˜ ë°°ë„ˆ í‘œì‹œ
	    const installBanner = document.createElement('div');
	    installBanner.style.cssText = `
	        position: fixed;
	        top: 0;
	        left: 0;
	        right: 0;
	        background: linear-gradient(135deg, #61AFFE, #4a8cd8);
	        color: white;
	        padding: 12px 20px;
	        text-align: center;
	        font-size: 14px;
	        font-weight: 500;
	        z-index: 1000;
	        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
	    `;
	    installBanner.innerHTML = `
	        ğŸ“± A.P.T í•‘ì„ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”! 
	        <button onclick="installPWA()" style="margin-left: 15px; background: white; color: #61AFFE; border: none; padding: 6px 12px; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 12px;">ì„¤ì¹˜í•˜ê¸°</button>
	        <button onclick="this.parentElement.remove()" style="margin-left: 8px; background: transparent; color: white; border: 1px solid white; padding: 6px 12px; border-radius: 20px; cursor: pointer; font-size: 12px;">ë‚˜ì¤‘ì—</button>
	    `;
	    
	    document.body.insertBefore(installBanner, document.body.firstChild);
	});

	function installPWA() {
	    if (deferredPrompt) {
	        deferredPrompt.prompt();
	        deferredPrompt.userChoice.then(function(choiceResult) {
	            if (choiceResult.outcome === 'accepted') {
	                console.log('âœ… ì‚¬ìš©ìê°€ PWA ì„¤ì¹˜ë¥¼ ìŠ¹ì¸í–ˆìŠµë‹ˆë‹¤');
	                const banner = document.querySelector('[style*="linear-gradient"]');
	                if (banner) banner.remove();
	            }
	            deferredPrompt = null;
	        });
	    }
	}
	</script>
   <!--  </script> -->
</body>
</html>