<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ê°œì¸ì •ë³´ìˆ˜ì • | A.P.T</title>
<link rel="stylesheet" th:href="@{/css/font.css}" />
<link rel="icon" href="/icons/favicon.png" type="image/png">
<style>
/* ê¸°ì¡´ ìŠ¤íƒ€ì¼ */
* {
	box-sizing: border-box;
}
body {
    margin: 0;
    padding: 0;
    font-family: 'Pretendard', sans-serif;
    background-color: #FDFDFD;
    height: 100vh; /* ë·°í¬íŠ¸ ë†’ì´ ì „ì²´ë¥¼ ì°¨ì§€í•˜ë„ë¡ ë³€ê²½ */
    overflow: hidden; /* ìŠ¤í¬ë¡¤ë°” ì œê±°, í•„ìš”ì— ë”°ë¼ auto */
    position: relative; /* ìì‹ ìš”ì†Œì˜ absolute ìœ„ì¹˜ ì§€ì •ì„ ìœ„í•œ ê¸°ì¤€ì  */
}

/* --- ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ ì¶”ê°€ --- */
.page-wrapper {
    position: relative; /* main-titleì˜ absolute ìœ„ì¹˜ ì§€ì •ì„ ìœ„í•œ ê¸°ì¤€ì  */
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center; /* í¼ ì»¨í…Œì´ë„ˆë¥¼ ìˆ˜í‰ ê°€ìš´ë° ì •ë ¬ */
    align-items: center;   /* í¼ ì»¨í…Œì´ë„ˆë¥¼ ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
    padding: 20px; /* ì—¬ë°± ì¶”ê°€ */
    box-sizing: border-box;
}

.main-title {
    position: absolute; /* .page-wrapperë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì ˆëŒ€ ìœ„ì¹˜ ì§€ì • */
    top: 40px;          /* ìœ„ì—ì„œ 30px ë–¨ì–´ì§ */
    /* ê°€ë¡œ ê°€ìš´ë° ì •ë ¬ì„ ìœ„í•œ ë³€ê²½ */
    left: 50%;          /* ì™¼ìª½ ëì„ ë¶€ëª¨ì˜ 50% ì§€ì ì— ìœ„ì¹˜ */
    transform: translateX(-50%); /* ìì‹ ì˜ ë„ˆë¹„ 50%ë§Œí¼ ì™¼ìª½ìœ¼ë¡œ ì´ë™ */
    /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
    font-size: 36px;
    font-weight: bold;
    color: #292929;
    text-decoration: none;
    z-index: 10;
    transition: color 0.2s ease;
}

.main-title:hover {
    color: #4281FF; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ */
}
/* --- ì—¬ê¸°ê¹Œì§€ ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ ì¶”ê°€ --- */

/* í¼ ìŠ¤íƒ€ì¼ */
.mypage-form-container {
    background-color: #FFFFFF;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 450px;
    /* ê¸°ì¡´ flexbox ì†ì„±ì€ .page-wrapperë¡œ ì´ë™ë˜ì—ˆìœ¼ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì œê±° */
    margin-top: 0; /* ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•´ margin-top ì œê±° */
    margin-bottom: 0; /* ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•´ margin-bottom ì œê±° */
}

.mypage-form-container h2 {
    text-align: center;
    color: #292929;
    margin-bottom: 30px;
    font-size: 26px;
    font-weight: 700;
}

/* --- ì„¹ì…˜ êµ¬ë¶„ ìŠ¤íƒ€ì¼ --- */
.section-group {
    padding-bottom: 25px; /* ê° ì„¹ì…˜ ë‚´ë¶€ ì½˜í…ì¸  í•˜ë‹¨ì— ì—¬ë°± ì¶”ê°€ */
    margin-bottom: 25px; /* ê° ì„¹ì…˜ ìì²´ì˜ í•˜ë‹¨ ì™¸ë¶€ ì—¬ë°± ì¶”ê°€ */
}

.nickname-section {
    margin-bottom: 10px; /* ë¹„ë°€ë²ˆí˜¸ ì„¹ì…˜ê³¼ì˜ ê°„ê²©ì„ ë„‰ë„‰í•˜ê²Œ ì„¤ì • */
}

.password-section {
    border-top: 1px solid #ddd; /* ì˜…ì€ íšŒìƒ‰ êµ¬ë¶„ì„  */
    padding-top: 40px; /* êµ¬ë¶„ì„  ìœ„ìª½ ì—¬ë°± (êµ¬ë¶„ì„ ê³¼ ì²« ë²ˆì§¸ ë¹„ë°€ë²ˆí˜¸ í•„ë“œ ì‚¬ì´ ê°„ê²©) */
    margin-top: 0;
}

/* ì„¹ì…˜ ê·¸ë£¹ ë‚´ ë§ˆì§€ë§‰ form-groupì˜ margin-bottom ì¡°ì • */
.section-group .form-group:last-child {
    margin-bottom: 0;
}
/* --- ì„¹ì…˜ êµ¬ë¶„ ìŠ¤íƒ€ì¼ ë --- */

/* ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œ ê°„ ê°„ê²© ì¡°ì • */
/* ì¼ë°˜ì ì¸ form-groupì˜ í•˜ë‹¨ ë§ˆì§„ì„ ëŠ˜ë ¤ í•„ë“œ ê°„ ê°„ê²©ì„ ë„“í˜ */
.form-group {
    margin-bottom: 35px; /* ê¸°ì¡´ 25pxì—ì„œ 35pxë¡œ ëŠ˜ë¦¼ */
}

/* ì´ì „ ë³€ê²½ìœ¼ë¡œ ì¸í•´ password-section ì•ˆì˜ ë§ˆì§€ë§‰ form-groupì€ ë§ˆì§„ì´ 0ì´ë¯€ë¡œ,
   ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•„ë“œ ì•„ë˜ëŠ” ì´ ì†ì„±ìœ¼ë¡œ ì˜í–¥ì„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.
   ì´ë¡œ ì¸í•´ ë²„íŠ¼ê³¼ ì ì ˆí•œ ê°„ê²©ì´ ìœ ì§€ë©ë‹ˆë‹¤. */


.form-group label {
    display: block;
    margin-bottom: 8px;
    color: #555;
    font-weight: 500;
    font-size: 15px;
}

.form-group input[type="text"],
.form-group input[type="password"] {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 10px;
    font-size: 16px;
    color: #333;
    transition: border-color 0.3s;
}

.form-group input[type="text"]:focus,
.form-group input[type="password"]:focus {
    border-color: #4281FF;
    outline: none;
}

.form-actions {
    text-align: center;
    margin-top: 30px; /* ë²„íŠ¼ ìœ„ì— ìˆëŠ” ì„¹ì…˜ê³¼ì˜ ê°„ê²© */
}

.form-actions button {
    width: 70%;
    padding: 14px 0;
    background-color: #fff;
    color: #919191;
    border: 1px solid #919191;
    border-radius: 20px;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    transition: border-color 0.3s ease, color 0.3s ease;
}

.form-actions button:hover {
    border: 1px solid #4281FF;
    color: #4281FF;
}

.message {
    text-align: center;
    margin-top: 20px;
    font-size: 14px;
    color: green; /* ì„±ê³µ ë©”ì‹œì§€ */
    display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
}

.error-message {
    color: red; /* ì—ëŸ¬ ë©”ì‹œì§€ */
    display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
}
</style>
</head>
<body>

    <div class="page-wrapper">
        <a class="main-title" th:href="@{/}">A.P.T</a>
        <div class="mypage-form-container">
            <h2>ê°œì¸ì •ë³´ ìˆ˜ì •</h2>
            <form id="mypageUpdateForm">
                <div class="section-group nickname-section"> <div class="form-group">
                        <label for="nickname">ë‹‰ë„¤ì„</label>
                        <input type="text" id="nickname" name="nickname" th:value="${session.loginUser.nickname}" placeholder="ìƒˆë¡œìš´ ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>

                <div class="section-group password-section"> <div class="form-group">
                        <label for="currentPassword">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="currentPassword" name="currentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="newPassword" name="newPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (4ì ì´ìƒ)">
                    </div>
                    <div class="form-group">
                        <label for="confirmNewPassword">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                        <input type="password" id="confirmNewPassword" name="confirmNewPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit">ìˆ˜ì • ì™„ë£Œ</button>
                </div>
                <p class="message" id="successMessage">ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <p class="message error-message" id="errorMessage"></p>
            </form>
        </div>
    </div>
    
   	<!-- Footer ì‹œì‘ -->
	<footer
		style="position: absolute; background-color: #f2f2f2; bottom: 0px; padding: 15px 0; text-align: center; font-size: 14px; color: #666; width: 100%;">
		<div>
			<p style="margin: 0;">Â© 2025 A.P.T. All rights reserved.</p>
			<p style="margin: 5px 0 0;">
				Made with <span class="computer-icon">ğŸ’»</span> by íŒ€ EF
			</p>
		</div>
	</footer>

    <script>
        // ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹¤ì œ ì„œë²„ í†µì‹  ì—†ì´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìœ íš¨ì„± ê²€ì‚¬ ë° ë©”ì‹œì§€ í‘œì‹œë¥¼ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.
        document.getElementById('mypageUpdateForm').addEventListener('submit', function(event) {
            event.preventDefault(); // í¼ ì œì¶œ ê¸°ë³¸ ë™ì‘ ë°©ì§€

            const nickname = document.getElementById('nickname').value;
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;

            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');

            // ë©”ì‹œì§€ ì´ˆê¸°í™”
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            errorMessage.textContent = '';

            let isValid = true;

            // ë‹‰ë„¤ì„ ìœ íš¨ì„± ê²€ì‚¬ (ì˜ˆ: ë¹„ì–´ìˆì§€ ì•ŠìŒ)
            if (nickname.trim() === '') {
                errorMessage.textContent = 'ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                isValid = false;
            }

            // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬
            // ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í–ˆë‹¤ë©´, í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ í•„ë“œë„ ì²´í¬
            if (newPassword !== '' || confirmNewPassword !== '') {
                if (currentPassword.trim() === '') {
                    errorMessage.textContent = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ë ¤ë©´ í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.';
                    isValid = false;
                } else if (newPassword.length < 4) {
                    errorMessage.textContent = 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.';
                    isValid = false;
                } else if (newPassword !== confirmNewPassword) {
                    errorMessage.textContent = 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                    isValid = false;
                }
            }

            if (isValid) {
                // ì‹¤ì œ ê¸°ëŠ¥ì´ ë¶™ëŠ”ë‹¤ë©´ ì—¬ê¸°ì— AJAX ìš”ì²­ ë“±ì„ ë³´ë‚´ë©´ ë©ë‹ˆë‹¤.
                // í˜„ì¬ëŠ” ê°€ìƒì˜ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                successMessage.style.display = 'block';
                console.log('í¼ ë°ì´í„°:', { nickname, currentPassword, newPassword });

                // ì‹¤ì œë¡œëŠ” ì„œë²„ ì‘ë‹µì— ë”°ë¼ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
                // setTimeout(() => { successMessage.style.display = 'none'; }, 3000); // 3ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¹€
            } else {
                errorMessage.style.display = 'block';
            }
        });
    </script>
</body>
</html>