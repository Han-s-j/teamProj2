<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title th:text="${post.boardTitle} + ' | A.P.Tí†¡'">ê¸€ ë³´ê¸° | A.P.Tí†¡</title>

<link rel="stylesheet" th:href="@{/css/sidebar.css}">

<link rel="stylesheet" th:href="@{/css/font.css}" />

<!-- Favicon -->
<link rel="icon" href="/icons/favicon.png" type="image/png">

<style>
/* ì¤‘ìš”: footerì™€ comment-input-areaì˜ ë†’ì´, ê·¸ë¦¬ê³  ì‚¬ì´ë“œë°” ë„ˆë¹„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. */
/* ì‹¤ì œ ë””ìì¸ì— ë”°ë¼ ì´ ê°’ë“¤ì„ ì •í™•íˆ ì¡°ì ˆí•´ì•¼ í•©ë‹ˆë‹¤. */
:root {
	--header-height: 70px;
	/* ì‹¤ì œ í—¤ë” ë†’ì´ë¥¼ ì¸¡ì •í•˜ì—¬ ì—¬ê¸°ì— ì…ë ¥í•´ì£¼ì„¸ìš” (padding, border í¬í•¨) */
	--comment-input-height: 62px; /* ëŒ“ê¸€ ì…ë ¥ì°½ì˜ ëŒ€ëµì ì¸ ë†’ì´ (íŒ¨ë”©, ë§ˆì§„ í¬í•¨) */
	--footer-height: 70px; /* í‘¸í„°ì˜ ëŒ€ëµì ì¸ ë†’ì´ (íŒ¨ë”©, ë§ˆì§„ í¬í•¨) */
	--total-fixed-height: calc(var(--comment-input-height)+ var(--footer-height));
}

body {
	margin: 0;
	background-color: #fdfdfd;
	min-height: 100vh; /* ìµœì†Œ ë†’ì´ë¥¼ ë·°í¬íŠ¸ ë†’ì´ë¡œ ì„¤ì • */
}

/* ìƒˆë¡œìš´ ë˜í¼ ì¶”ê°€: ì‚¬ì´ë“œë°”ì™€ ë©”ì¸ ì½˜í…ì¸ ë¥¼ ê°ì‹¸ê³  flexë¡œ ì •ë ¬ */
.page-wrapper {
	display: flex; /* ì‚¬ì´ë“œë°”ì™€ ë©”ì¸ ì»¨í…ì¸ ë¥¼ ê°€ë¡œë¡œ ë‚˜ì—´ */
	min-height: 100vh; /* ë·°í¬íŠ¸ ì „ì²´ ë†’ì´ë¥¼ ì°¨ì§€í•˜ë„ë¡ */
	/* í‘¸í„°ì™€ ê³ ì • ëŒ“ê¸€ ì…ë ¥ì°½ì´ ê°€ë¦´ ê³µê°„ì„ page-wrapperì˜ í•˜ë‹¨ì— í™•ë³´ */
	padding-bottom: var(--total-fixed-height);
	box-sizing: border-box;
	padding-bottom: var(--total-fixed-height); /* íŒ¨ë”©ì´ ì „ì²´ ë„ˆë¹„/ë†’ì´ì— í¬í•¨ë˜ë„ë¡ */
}

.main-content-wrapper {
	flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€ */
	display: flex;
	justify-content: center; /* containerë¥¼ ì¤‘ì•™ ì •ë ¬ */
}

.container {
	width: 100%;
	max-width: 800px;
	background-color: #fdfdfd;
	margin-bottom: 132px;
	height: calc(100% - 132px);
}

.header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 15px 20px;
	border-bottom: 1px solid #eee;
	background-color: #fff;
	position: sticky; /* í—¤ë” ê³ ì • */
	top: 0;
	z-index: 100;
}

.header .title {
	font-weight: bold;
	font-size: 24px;
	color: #292929;
	letter-spacing: 1px;
}

.header .title:hover {
	color: #62B0FF;
}

.header a {
	color: inherit; /* ë¶€ëª¨ ìš”ì†Œì˜ ê¸€ì”¨ ìƒ‰ìƒì„ ìƒì†ë°›ìŒ */
	text-decoration: none; /* ë°‘ì¤„ ì œê±° */
}

/* ë°©ë¬¸í•œ ë§í¬ì˜ ìƒ‰ìƒë„ ë™ì¼í•˜ê²Œ ìœ ì§€í•˜ë ¤ë©´ */
.header a:visited {
	color: inherit;
}

.header .buttons {
	display: flex;
}

.header .button {
	padding: 8px 15px;
	border-radius: 10px;
	font-size: 14px;
	cursor: pointer;
	text-decoration: none;
}

/* ê¸€ì“°ê¸° ë²„íŠ¼ */
.header .button.primary {
	background-color: #62B0FF; /* íŒŒë€ìƒ‰ ë²„íŠ¼ */
	color: white;
	margin-left: 10px;
	transition: background-color 0.2s, color 0.2s, border-color 0.2s;
	/* border-colorë„ transitionì— ì¶”ê°€ */
	border: 1px solid transparent; /* ê¸°ë³¸ ìƒíƒœì— íˆ¬ëª… í…Œë‘ë¦¬ ì¶”ê°€ */
}

.header .button.primary:hover {
	background-color: #fff; /* íŒŒë€ìƒ‰ ë²„íŠ¼ */
	color: #62B0FF;
	border: 1px solid #62B0FF;
}

/* ë‚´ í™œë™ ë²„íŠ¼ */
.header .button.secondary {
	background-color: #fff;
	color: #62B0FF;
	margin-left: 10px;
	border: 1px solid #62B0FF;
	transition: background-color 0.2s, color 0.2s;
}

.header .button.secondary:hover {
	background-color: #62B0FF; /* íŒŒë€ìƒ‰ ë²„íŠ¼ */
	color: #ffffff;
}

.post {
	display: flex;
	padding: 20px;
}

.post .avatar {
	width: 40px;
	height: 40px;
	border-radius: 50%;
	margin-right: 15px;
	flex-shrink: 0;
	background-image: url('/icons/profile.png'); /* ì´ë¯¸ì§€ URLì„ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš” */
	background-size: cover; /* ì´ë¯¸ì§€ê°€ avatar ì˜ì—­ì„ ê½‰ ì±„ìš°ë„ë¡ í•©ë‹ˆë‹¤. */
	background-position: center; /* ì´ë¯¸ì§€ë¥¼ ê°€ìš´ë° ì •ë ¬í•©ë‹ˆë‹¤. */
}

.post .content {
	flex-grow: 1;
}

.post .user-info {
	display: flex;
	align-items: center;
	margin-bottom: 5px;
}

.post .username {
	font-weight: 500;
	margin-right: 5px;
	font-size: 18px;
	color: #363636;
	margin-right: 5px;
}

.post .location-time {
	font-size: 14px;
	color: #888;
}

.post .menu-icon {
	font-size: 24px;
	color: #888;
	cursor: pointer;
}

.comments-section .menu-icon {
	font-size: 20px;
	color: #888;
	cursor: pointer;
}

.post .post-title {
	font-weight: bold; /* ì œëª©ì€ ë” ê°•ì¡° */
	font-size: 20px; /* ë³¸ë¬¸ë³´ë‹¤ ì•½ê°„ í¬ê²Œ */
	margin-bottom: 10px; /* ì œëª©ê³¼ ë³¸ë¬¸ ì‚¬ì´ ê°„ê²© */
	line-height: 1.4;
	color: #292929;
}

.post .post-body {
	line-height: 1.5;
	margin-bottom: 10px; /* ë³¸ë¬¸ê³¼ ëŒ“ê¸€ ìˆ˜ ì‚¬ì´ ê°„ê²© */
	font-size: 16px; /* ë³¸ë¬¸ ê¸€ì í¬ê¸° */
	color: #292929; /* ë³¸ë¬¸ ê¸€ììƒ‰ */
}

.comment-count {
	display: flex;
	align-items: center;
	color: #888;
	font-size: 14px;
	margin-top: 20px;
	margin-left: -50px;
}

.comments-section {
	padding: 0 20px;
}

.comment {
	display: flex;
	padding: 15px 0;
	border-top: 1px solid #eee;
}

.comment .avatar {
	width: 30px;
	height: 30px;
	border-radius: 50%;
	background-image: url('/icons/profile.png'); /* ì´ë¯¸ì§€ URLì„ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš” */
	background-size: cover; /* ì´ë¯¸ì§€ê°€ avatar ì˜ì—­ì„ ê½‰ ì±„ìš°ë„ë¡ í•©ë‹ˆë‹¤. */
	background-position: center; /* ì´ë¯¸ì§€ë¥¼ ê°€ìš´ë° ì •ë ¬í•©ë‹ˆë‹¤. */
	margin-right: 10px;
	flex-shrink: 0;
	background-size: cover; /* ì´ë¯¸ì§€ê°€ avatar ì˜ì—­ì„ ê½‰ ì±„ìš°ë„ë¡ í•©ë‹ˆë‹¤. */
	background-position: center;
}

.comment .content {
	flex-grow: 1;
}

.comment .user-info {
	display: flex;
	align-items: center;
	margin-bottom: 3px;
	color: #292929;
}

.comment .username {
	font-weight: bold;
	font-size: 13px;
	margin-right: 5px;
}

.comment .location-time {
	font-size: 12px;
	color: #888;
}

/* ê²Œì‹œë¬¼/ëŒ“ê¸€ ì‹œê°„ í‘œì‹œë¥¼ ìœ„í•œ í´ë˜ìŠ¤ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) */
.dynamic-time {
	visibility: hidden;
}

.comment .comment-text {
	font-size: 14px;
	line-height: 1.4;
	margin-top: 5px;
}

/* ë‹µëŒ“ê¸€ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
.reply-comment {
	margin-left: 40px; /* ì› ëŒ“ê¸€ë³´ë‹¤ ì•ˆìª½ìœ¼ë¡œ ë“¤ì—¬ì“°ê¸° */
	border-top: none; /* ë‹µëŒ“ê¸€ ìœ„ì—ëŠ” ì„ ì´ ì—†ë„ë¡ */
	padding-top: 5px; /* ìƒë‹¨ ì—¬ë°± ì¡°ì ˆ */
	padding-bottom: 5px; /* í•˜ë‹¨ ì—¬ë°± ì¡°ì ˆ */
}

.reply-comment .avatar {
	width: 25px; /* ë‹µëŒ“ê¸€ ì•„ë°”íƒ€ëŠ” ì¡°ê¸ˆ ë” ì‘ê²Œ */
	height: 25px;
}

/* ëŒ“ê¸€ ì…ë ¥ì°½ - ê³ ì • ìœ„ì¹˜ ë° ë·°í¬íŠ¸ ì¤‘ì•™ ì •ë ¬ */
.comment-input-area {
	position: fixed;
	bottom: var(--footer-height); /* í‘¸í„° ë†’ì´ë§Œí¼ ìœ„ë¡œ ì˜¬ë¦¼ */
	width: 100%;
	max-width: 800px; /* ì»¨í…Œì´ë„ˆì˜ max-widthì™€ ë™ì¼í•˜ê²Œ ì„¤ì • */
	background-color: #fff;
	border-top: 1px solid #eee;
	padding: 10px 20px;
	display: flex;
	align-items: center;
	box-sizing: border-box;
	z-index: 90;
	left: 0;
	right: 0;
	margin: 0 auto;
}

.comment-input-area .avatar {
	width: 35px;
	height: 35px;
	border-radius: 50%;
	background-image: url('/icons/profile.png'); /* ì´ë¯¸ì§€ URLì„ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš” */
	background-size: cover; /* ì´ë¯¸ì§€ê°€ avatar ì˜ì—­ì„ ê½‰ ì±„ìš°ë„ë¡ í•©ë‹ˆë‹¤. */
	background-position: center; /* ì´ë¯¸ì§€ë¥¼ ê°€ìš´ë° ì •ë ¬í•©ë‹ˆë‹¤. */
	margin-right: 15px;
	flex-shrink: 0;
}

.comment-input-area .input-field {
	flex-grow: 1;
	padding: 10px 15px;
	border: 1px solid #ddd;
	border-radius: 20px;
	outline: none;
	font-size: 15px;
	margin-right: 10px;
}

.comment-input-area .submit-button {
	padding: 10px 20px;
	background-color: #f0f0f0;
	border: none;
	border-radius: 20px;
	font-size: 15px;
	color: #888;
	cursor: pointer;
	white-space: nowrap; /* ë²„íŠ¼ í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ ë°©ì§€ */
	transition: background-color 0.2s, color 0.2s;
}

.comment-input-area .submit-button:hover {
	background-color: #62B0FF;
	color: #fff;
}

/* ëŒ€ëŒ“ê¸€ ìŠ¤íƒ€ì¼ */
/* ë‹µëŒ“ê¸€ í¼ ìŠ¤íƒ€ì¼ */
.reply-form {
	background-color: #fdfdfd;
	padding: 10px 15px;
	display: flex;
	align-items: center;
	margin-top: 10px;
	margin-left: 0;
	margin-right: 0;
	border-radius: 0;
	width: 100%;
}

/* ë‹µëŒ“ê¸€ ë‹¬ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.reply-button {
	/* location-timeê³¼ ë™ì¼í•œ í°íŠ¸ í¬ê¸° ë° ìƒ‰ìƒ ì ìš© */
	font-size: 12px; /* location-timeê³¼ ë™ì¼ */
	color: #888; /* location-timeê³¼ ë™ì¼ */
	/* ë²„íŠ¼ì˜ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì œê±° */
	background: none; /* ë°°ê²½ìƒ‰ ì—†ìŒ */
	border: none; /* í…Œë‘ë¦¬ ì—†ìŒ */
	padding: 0; /* íŒ¨ë”© ì—†ìŒ */
	margin: 0; /* ë§ˆì§„ ì—†ìŒ (í•„ìš”ì— ë”°ë¼ margin-leftëŠ” ìœ ì§€ ê°€ëŠ¥) */
	outline: none; /* í¬ì»¤ìŠ¤ ì‹œ ì•„ì›ƒë¼ì¸ ì œê±° */
	cursor: pointer; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ í¬ì¸í„° ë³€ê²½ (ë§í¬ì²˜ëŸ¼ ë³´ì„) */
	text-decoration: underline; /* í…ìŠ¤íŠ¸ì— ë°‘ì¤„ ì¶”ê°€ (ë§í¬ì²˜ëŸ¼ ë³´ì„, ì„ íƒ ì‚¬í•­) */
	white-space: nowrap; /* í…ìŠ¤íŠ¸ê°€ ì¤„ë°”ê¿ˆë˜ì§€ ì•Šë„ë¡ ë°©ì§€ */
	margin-left: 10px; /* ê¸°ì¡´ ìœ„ì¹˜ ìœ ì§€ë¥¼ ìœ„í•´ ì´ ë§ˆì§„ì€ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ */
}

/* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ ë“± íš¨ê³¼ ì¶”ê°€ (ì„ íƒ ì‚¬í•­) */
.reply-button:hover {
	color: #555; /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ì•½ê°„ ì§„í•œ ìƒ‰ìƒ */
}

.reply-form .avatar {
	display: none; /* ì•„ë°”íƒ€ë¥¼ í™”ë©´ì—ì„œ ìˆ¨ê¹€ */
}

/* ë‹µëŒ“ê¸€ í¼ ë‚´ ë“±ë¡ ë²„íŠ¼ - ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.reply-form .submit-reply-button {
	padding: 10px 20px;
	background-color: #f0f0f0; /* ê¸°ë³¸ ë°°ê²½ìƒ‰ */
	border: none;
	border-radius: 20px;
	font-size: 16px;
	color: #888; /* ê¸°ë³¸ ê¸€ììƒ‰ */
	cursor: pointer;
	white-space: nowrap;
	transition: background-color 0.2s, color 0.2s; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
	font-family: inherit; /* ë¶€ëª¨ í°íŠ¸ ìƒì† */
}

.reply-form .submit-reply-button:hover {
	background-color: #62B0FF;
	color: #fff;
}

/* ë‹µëŒ“ê¸€ í¼ ë‚´ ì…ë ¥ í•„ë“œ (textarea) */
.reply-form .reply-input-field {
	flex-grow: 1;
	padding: 10px 15px;
	border: 1px solid #ddd;
	border-radius: 20px;
	outline: none;
	font-size: 14px;
	margin-right: 10px;
	resize: none; /* í¬ê¸° ì¡°ì ˆ í•¸ë“¤ ì œê±° */
	height: 39px;
	box-sizing: border-box;
	font-family: inherit; /* ë¶€ëª¨ í°íŠ¸ ìƒì† */
}

.reply-form .submit-reply {
	background-color: #4CAF50; /* ë“±ë¡ ë²„íŠ¼ ìƒ‰ìƒ */
	color: white;
	border: none;
	border-radius: 4px;
	padding: 8px 15px;
	cursor: pointer;
	font-size: 14px;
	white-space: nowrap; /* í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ ë°©ì§€ */
}

.reply-form .submit-reply:hover {
	background-color: #45a049;
}

.dropdown-menu {
	position: absolute;
	right: 0;
	top: 25px;
	background-color: white;
	border: 1px solid #ccc;
	border-radius: 8px;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
	z-index: 100;
	width: 120px; /* ë©”ë‰´ í¬ê¸° ê³ ì • (ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ ê°€ëŠ¥) */
	overflow: hidden;
}

/* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì•„ì´í…œ */
.dropdown-menu .menu-item {
	display: block; /* ë§í¬ë¥¼ ë¸”ë¡ ìš”ì†Œë¡œ ë§Œë“¤ì–´ ì „ì²´ ë„ˆë¹„ ì°¨ì§€ */
	padding: 10px 15px; /* íŒ¨ë”© */
	text-decoration: none; /* ë°‘ì¤„ ì œê±° */
	color: #333; /* ê¸€ììƒ‰ */
	font-size: 14px; /* ê¸€ì í¬ê¸° */
	transition: background-color 0.2s; /* í˜¸ë²„ íš¨ê³¼ */
}

.dropdown-menu .menu-item:hover {
	background-color: #f0f0f0; /* í˜¸ë²„ ì‹œ ë°°ê²½ìƒ‰ ë³€ê²½ */
}

/* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
.modal-overlay {
	display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(0, 0, 0, 0.5);
	justify-content: center;
	align-items: center;
	z-index: 1000;
}

.modal-content {
	background-color: #fff;
	padding: 30px;
	border-radius: 10px;
	box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
	text-align: center;
	width: 300px;
}

.modal-content p {
	font-size: 18px;
	margin-bottom: 25px;
	color: #292929;
}

.modal-buttons button {
	background-color: #fff;
	color: #62B0FF;
	border: none;
	padding: 10px 20px;
	cursor: pointer;
	font-size: 16px;
	margin: 0 10px;
}

.modal-buttons button#cancelDelete {
	background-color: #fff;
	color: #919191;
}

/* ê²Œì‹œê¸€ ìˆ˜ì • í¼ */
.post-edit-form {
    width: 100%; /* ì˜ˆì‹œ: ë¶€ëª¨ ìš”ì†Œì˜ 100% ë„ˆë¹„ë¡œ ì„¤ì • */
    max-width: 700px; /* ì˜ˆì‹œ: ìµœëŒ€ ë„ˆë¹„ ì„¤ì • (ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šê²Œ) */
    box-sizing: border-box; /* paddingì´ widthì— í¬í•¨ë˜ë„ë¡ */
    /* í•„ìš”í•˜ë‹¤ë©´ ë°°ê²½ìƒ‰ì´ë‚˜ í…Œë‘ë¦¬ ì¶”ê°€í•˜ì—¬ ë””ìì¸ */
    /* background-color: #f9f9f9; */
    /* border: 1px solid #e0e0e0; */
    border-radius: 8px;
    margin-top: 15px; /* ê²Œì‹œë¬¼ ì œëª©/ë³¸ë¬¸ ì•„ë˜ ê°„ê²© */
    margin-bottom: 15px; /* ëŒ“ê¸€ ì¹´ìš´íŠ¸ ìœ„ ê°„ê²© */
    margin-left: -10px;
}

/* ìˆ˜ì • í¼ ë‚´ì˜ ì œëª© ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
.edit-title-input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 10px;
    font-size: 18px;
    font-weight: 500;
    color: #292929;
}

.edit-title-input:focus {
    border-color: #62B0FF;
    outline: none; /* ë¸Œë¼ìš°ì € ê¸°ë³¸ í¬ì»¤ìŠ¤ ì•„ì›ƒë¼ì¸ ì œê±° */
}

/* ìˆ˜ì • í¼ ë‚´ì˜ ë³¸ë¬¸ ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
.edit-body-textarea {
    width: 100%;
    min-height: 150px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 10px;
    font-size: 16px;
    line-height: 1.5;
    resize: none; /* ì‚¬ìš©ì ë¦¬ì‚¬ì´ì¦ˆ ë¹„í™œì„±í™” */
    color: #292929;
}

.edit-body-textarea:focus {
    border-color: #62B0FF;
    outline: none; /* ë¸Œë¼ìš°ì € ê¸°ë³¸ í¬ì»¤ìŠ¤ ì•„ì›ƒë¼ì¸ ì œê±° */
}

/* ìˆ˜ì • ë²„íŠ¼ ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
.edit-buttons {
    display: flex;
    justify-content: flex-end;
    margin-top: 10px;
    gap: 10px;
}

/* ê¸°ë³¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ê¸°ì¡´ ì½”ë“œì™€ í†µì¼) */
.button-base {
    padding: 8px 15px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
}

.button-outline {
    background-color: transparent;
    border: 1px solid #919191; /* ì›í•˜ëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½ */
    color: #919191; /* ì›í•˜ëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½ */
}

.save-edit-btn {
    background-color: #fdfdf; /* ì›í•˜ëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½ */
    border-color: #62B0FF;
    color: #62B0FF;
}

.save-post-edit-btn {
    background-color: #fdfdf; /* ì›í•˜ëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½ */
    border-color: #62B0FF;
    color: #62B0FF;
}

/* ëŒ€ëŒ“ê¸€ ì…ë ¥ í•„ë“œ */
.re-reply-input-field {
    background-color: #fdfdfd;
    padding: 10px 15px;
    /* display: flex;  --> textareaì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì œê±°í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. */
    /* align-items: center; --> display: flex;ê°€ ì—†ë‹¤ë©´ ì˜ë¯¸ ì—†ìŒ */
    margin-top: 10px;
    margin-left: 0;
    margin-right: 0;
    border: 1px solid #ddd;
    border-radius: 10px;
    width: 100%;
    min-height: 40px; /* ì ì ˆí•œ ìµœì†Œ ë†’ì´ ì„¤ì • */
    max-height: 60px; /* ìµœëŒ€ ë†’ì´ ìœ ì§€ */
    resize: none; /* ì‚¬ìš©ì ë¦¬ì‚¬ì´ì¦ˆ ë¹„í™œì„±í™” */
    overflow-y: auto; /* ë‚´ìš© ì´ˆê³¼ ì‹œ ìŠ¤í¬ë¡¤ë°” ìƒì„± */
    box-sizing: border-box; /* paddingì´ widthì— í¬í•¨ë˜ë„ë¡ */
    font-size: 13px; /* í°íŠ¸ ì‚¬ì´ì¦ˆë„ ì¼ê´€ì„± ìˆê²Œ */
    line-height: 1.5; /* ë¼ì¸ ë†’ì´ë„ ì¼ê´€ì„± ìˆê²Œ */
    font-family: 'Pretendard', sans-serif;
}

.re-reply-input-field:focus {
    border-color: #62B0FF;
    outline: none; /* ë¸Œë¼ìš°ì € ê¸°ë³¸ í¬ì»¤ìŠ¤ ì•„ì›ƒë¼ì¸ ì œê±° */
}

/* í‘¸í„° - ê³ ì • ìœ„ì¹˜ */
footer {
	position: fixed;
	bottom: 0;
	background-color: #f2f2f2;
	padding: 15px 0;
	text-align: center;
	font-size: 14px;
	color: #666;
	width: 100%; /* max-widthê°€ ì ìš©ëœ ìƒíƒœì—ì„œ 100%ë¥¼ ì°¨ì§€ */
	box-sizing: border-box;
	z-index: 80;
	/* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ì•™ ì •ë ¬ */
	left: var(--sidebar-width); /* ì‚¬ì´ë“œë°” ëë‚˜ëŠ” ì§€ì ì—ì„œ ì‹œì‘ */
	right: 0; /* ìš°ì¸¡ ëê¹Œì§€ í™•ì¥ */
	margin: 0 auto; /* max-widthê°€ ì ìš©ëœ ìƒíƒœì—ì„œ ì¤‘ì•™ ì •ë ¬ */
}
</style>
</head>
<body>
	<div class="page-wrapper">
		<div th:replace="common/sidebar :: sidebar"></div>

		<div class="main-content-wrapper">
			<div class="container">
				<div class="header">
					<div class="title">
						<a th:href="@{communityMain}">A.P.Tí†¡</a>
					</div>
					<div style="display: flex; align-items: center;">
						<div class="buttons">
							<a th:href="@{communityMy}" class="button secondary">ë‚´ í™œë™</a> <a
								th:href="@{communityWrite}" class="button primary">ê¸€ì“°ê¸°</a>
						</div>
					</div>
				</div>
				<!-- ê²Œì‹œë¬¼ ì‹œì‘  -->
				<div class="post">
					<div class="avatar"></div>
					<div class="content">
						<div class="user-info">
							<span class="username" th:text="${post.nickname}+'ë‹˜'">ì£¼í™©ë¨¸ë¦¬
								ì•¤ë‹˜</span> <span class="location-time" th:text="${post.apartmentName}">ì´ˆë¡ë§ˆì„
								5ë‹¨ì§€</span> <span class="location-time">&nbsp;Â·&nbsp;</span> <span
								class="location-time dynamic-time"
								th:attr="data-published-date=${#dates.format(post.publishedDate, 'yyyy-MM-dd''T''HH:mm:ss')}">
								[[${#dates.format(post.publishedDate, 'yyyy.MM.dd HH:mm')}]]</span>
						</div>
						<div class="post-title" th:text="${post.boardTitle}">ì•ˆë…•í•˜ì„¸ìš”</div>
						<div class="post-body" th:text="${post.boardContent}">ì´ë²ˆ ë‹¬ì—
							ìƒˆë¡œ ì…ì£¼í–ˆì–´ìš”! ë°˜ê°€ì›Œìš”!</div>
						<div class="comment-count">
							<img src="/icons/talk_bubble.png"
								style="width: 18px; height: auto; margin-right: 10px;"> ëŒ“ê¸€
							<span th:text="${commentCount}" style="margin-left: 4px">0</span>
						</div>
					</div>
					<div class="menu-icon-wrapper" style="position: relative;">
						<div class="menu-icon">&#x22EE;</div>
						<div class="dropdown-menu" style="display: none;">
							<a
								th:if="${loggedInUserId != null and loggedInUserId.equals(post.userId)}"
								href="#" class="menu-item" id="editPostBtn">ìˆ˜ì •í•˜ê¸°</a> <a
								th:if="${loggedInUserId != null and loggedInUserId.equals(post.userId)}"
								href="#" class="menu-item" id="deletePostBtn">ì‚­ì œí•˜ê¸°</a> <a
								th:if="${loggedInUserId == null or !loggedInUserId.equals(post.userId)}"
								href="#" class="menu-item" id="reportPostBtn">ì‹ ê³ í•˜ê¸°</a>
						</div>
					</div>
					
				</div>
				<!-- ê²Œì‹œë¬¼ ë -->
				<!-- ëŒ“ê¸€ ì‹œì‘ -->
				<div class="comments-section">
				    <div th:if="${#lists.isEmpty(nestedReplies)}">
				        <p style="text-align: center; color: #888; padding: 20px;">ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
				    </div>
				
				    <div th:each="wrapper : ${nestedReplies}">
				        <!-- ë¶€ëª¨ ëŒ“ê¸€ -->
				        <div th:class="'comment'" th:attr="data-reply-no=${wrapper.parent.replyNo}">
				            <div class="avatar"></div>
				            <div class="content">
				                <div class="user-info">
				                    <span class="username" th:text="${wrapper.parent.nickname} + 'ë‹˜'">ëŒ“ê¸€ì‘ì„±ì</span>
				                    <span class="location-time" th:text="${wrapper.parent.apartmentName}">ì´ˆë¡ë§ˆì„ 5ë‹¨ì§€</span>
				                    <span class="location-time">&nbsp;Â·&nbsp;</span>
				                    <span class="location-time dynamic-time"
				                          th:attr="data-published-date=${#dates.format(wrapper.parent.publishedDate, 'yyyy-MM-dd''T''HH:mm:ss')}">
				                        [[${#dates.format(wrapper.parent.publishedDate, 'yyyy.MM.dd HH:mm')}]]
				                    </span>
				                    <button th:if="${wrapper.parent.parentNo == null}" class="reply-button location-time">ë‹µëŒ“ê¸€ ë‹¬ê¸°</button>
				                </div>
				                <div class="comment-text" th:text="${wrapper.parent.replyContent}">ëŒ“ê¸€ ë‚´ìš©</div>
				            </div>
				            <div class="menu-icon-wrapper" style="position: relative;">
				                <div class="menu-icon">&#x22EE;</div>
				                <div class="dropdown-menu" style="display: none;">
				                    <a th:if="${loggedInUserId != null and loggedInUserId.equals(wrapper.parent.userId)}"
				                       href="#" class="menu-item edit-reply-btn"
				                       th:data-reply-no="${wrapper.parent.replyNo}">ìˆ˜ì •í•˜ê¸°</a>
				                    <a th:if="${loggedInUserId != null and loggedInUserId.equals(wrapper.parent.userId)}"
				                       href="#" class="menu-item delete-reply-btn"
				                       th:data-reply-no="${wrapper.parent.replyNo}">ì‚­ì œí•˜ê¸°</a>
				                    <a th:if="${loggedInUserId == null or !loggedInUserId.equals(wrapper.parent.userId)}"
				                       href="#" class="menu-item report-reply-btn"
				                       th:data-reply-no="${wrapper.parent.replyNo}">ì‹ ê³ í•˜ê¸°</a>
				                </div>
				            </div>
				        </div>
				
				        <!-- ëŒ€ëŒ“ê¸€ ë°˜ë³µ -->
				        <div th:each="child : ${wrapper.children}"
				             th:class="'comment reply-comment'"
				             th:attr="data-reply-no=${child.replyNo}">
				            <div class="avatar"></div>
				            <div class="content">
				                <div class="user-info">
				                    <span class="username" th:text="${child.nickname} + 'ë‹˜'">ë‹µëŒ“ê¸€ ì‘ì„±ì</span>
				                    <span class="location-time" th:text="${child.apartmentName}">ì´ˆë¡ë§ˆì„ 5ë‹¨ì§€</span>
				                    <span class="location-time">&nbsp;Â·&nbsp;</span>
				                    <span class="location-time dynamic-time"
				                          th:attr="data-published-date=${#dates.format(child.publishedDate, 'yyyy-MM-dd''T''HH:mm:ss')}">
				                        [[${#dates.format(child.publishedDate, 'yyyy.MM.dd HH:mm')}]]
				                    </span>
				                    <button th:if="${child.parentNo == null}" class="reply-button location-time">ë‹µëŒ“ê¸€ ë‹¬ê¸°</button>
				                </div>
				                <div class="comment-text" th:text="${child.replyContent}">ë‹µëŒ“ê¸€ ë‚´ìš©</div>
				            </div>
				            <div class="menu-icon-wrapper" style="position: relative;">
				                <div class="menu-icon">&#x22EE;</div>
				                <div class="dropdown-menu" style="display: none;">
				                    <a th:if="${loggedInUserId != null and loggedInUserId.equals(child.userId)}"
				                       href="#" class="menu-item edit-reply-btn"
				                       th:data-reply-no="${child.replyNo}">ìˆ˜ì •í•˜ê¸°</a>
				                    <a th:if="${loggedInUserId != null and loggedInUserId.equals(child.userId)}"
				                       href="#" class="menu-item delete-reply-btn"
				                       th:data-reply-no="${child.replyNo}">ì‚­ì œí•˜ê¸°</a>
				                    <a th:if="${loggedInUserId == null or !loggedInUserId.equals(child.userId)}"
				                       href="#" class="menu-item report-reply-btn"
				                       th:data-reply-no="${child.replyNo}">ì‹ ê³ í•˜ê¸°</a>
				                </div>
				            </div>
				        </div>
				    </div>
				</div>
			</div>
		</div>
		<div class="comment-input-area">
			<div class="avatar"></div>
			<input type="text" class="input-field" id="replyInputField"
				placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”">
			<button class="submit-button" id="submitReplyButton">ë“±ë¡</button>
		</div>
	</div>
	<div class="modal-overlay" id="deleteModal">
		<div class="modal-content">
			<p>ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
			<div class="modal-buttons">
				<button id="confirmDelete">ì˜ˆ</button>
				<button id="cancelDelete">ì•„ë‹ˆì˜¤</button>
			</div>
		</div>
	</div>

	<footer>
		<div>
			<p style="margin: 0;">Â© 2025 A.P.T. All rights reserved.</p>
			<p style="margin: 5px 0 0;">
				Made with <span class="computer-icon">ğŸ’»</span> by íŒ€ EF
			</p>
		</div>
	</footer>
	<script th:inline="javascript">
	/*<![CDATA[*/
	// ì‹œê°„ ê³„ì‚° í•¨ìˆ˜ (communityMain.htmlì—ì„œ ê°€ì ¸ì˜´)
	function timeAgo(date) {
	    const now = new Date();
	    const publishedDate = new Date(date);
	    const seconds = Math.floor((now - publishedDate) / 1000);

	    let interval = seconds / 31536000;
	    if (interval > 1) {
	        return Math.floor(interval) + "ë…„ ì „";
	    }
	    interval = seconds / 2592000;
	    if (interval > 1) {
	        return Math.floor(interval) + "ê°œì›” ì „";
	    }
	    interval = seconds / 86400;
	    if (interval > 1) {
	        return Math.floor(interval) + "ì¼ ì „";
	    }
	    interval = seconds / 3600;
	    if (interval > 1) {
	        return Math.floor(interval) + "ì‹œê°„ ì „";
	    }
	    interval = seconds / 60;
	    if (interval > 1) {
	        return Math.floor(interval) + "ë¶„ ì „";
	    }
	    return Math.floor(seconds) + "ì´ˆ ì „";
	}
	
	// í˜ì´ì§€ ë¡œë“œ í›„ ëª¨ë“  ê²Œì‹œë¬¼ ë° ëŒ“ê¸€ ì‹œê°„ ì—…ë°ì´íŠ¸
	document.addEventListener('DOMContentLoaded', function() {
	    const dynamicTimeElements = document.querySelectorAll('.dynamic-time');
	    dynamicTimeElements.forEach(function(element) {
	        const rawDateString = element.getAttribute('data-published-date');
	        if (rawDateString) {
	            element.textContent = timeAgo(rawDateString);
	            element.style.visibility = 'visible'; 
	        } else {
	        	// data-published-dateê°€ ì—†ì„ ê²½ìš°, ì´ˆê¸° í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ë³´ì´ê²Œ í•¨
	            element.style.visibility = 'visible'; 
	        }
	    });
	    const replyButtons = document.querySelectorAll('.reply-button');

	    replyButtons.forEach(button => {
	        button.addEventListener('click', function() {
	            const commentElement = this.closest('.comment');
	            let replyForm = commentElement.querySelector('.reply-form');

	            if (replyForm) {
	                replyForm.remove();
	            } else {
	                replyForm = document.createElement('div');
	                replyForm.classList.add('reply-form');

	                replyForm.innerHTML = `
	                    <textarea class="reply-input-field" placeholder="ë‹µê¸€ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
	                    <button class="submit-reply-button" disabled>ë“±ë¡</button> `;

	                commentElement.querySelector('.comment-text').after(replyForm);

	                const replyTextarea = replyForm.querySelector('.reply-input-field');
	                const submitButton = replyForm.querySelector('.submit-reply-button');

	                // ì´ˆê¸° ë¡œë“œ ì‹œ ë²„íŠ¼ ìƒíƒœ ì„¤ì • (í•„ìš”í•˜ë‹¤ë©´)
	                // í˜„ì¬ëŠ” textareaê°€ ë¹„ì–´ìˆìœ¼ë¯€ë¡œ disabledê°€ ë§ìŠµë‹ˆë‹¤.

	                 replyTextarea.addEventListener('input', function() {
	                    submitButton.disabled = this.value.trim() === '';
	                    submitButton.classList.toggle('active', this.value.trim() !== '');
	                });

	                // ë‹µê¸€ ë“±ë¡ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ - AJAX í˜¸ì¶œ
	                submitButton.addEventListener('click', function() {
	                    const replyContent = replyTextarea.value;
	                    const currentBoardNo = /*[[${post.boardNo}]]*/ 0; // Thymeleafë¡œ ê²Œì‹œë¬¼ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸°
	                 	// ë¶€ëª¨ ëŒ“ê¸€ì˜ IDë¥¼ ê°€ì ¸ì™€ parentNoë¡œ ì „ë‹¬ (ë‹µê¸€ ê¸°ëŠ¥ êµ¬í˜„ ì‹œ í•„ìš”)
	                    // í˜„ì¬ëŠ” ì¼ë°˜ ëŒ“ê¸€ì´ë¯€ë¡œ parentNoëŠ” nullë¡œ ì„¤ì •
	                    const parentCommentElement = this.closest('.comment');
                    const parentReplyNo = parentCommentElement ? parentCommentElement.dataset.replyNo : null; // ë¶€ëª¨ ëŒ“ê¸€ ë²ˆí˜¸ (ë‹µê¸€ ì‹œ í•„ìš”)

                    if (replyContent.trim() !== '') {
                        // AJAX ìš”ì²­ ë³´ë‚´ê¸°
                        fetch('/community/addReply', { // ì»¨íŠ¸ë¡¤ëŸ¬ì˜ @PostMapping ê²½ë¡œ
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded', // í¼ ë°ì´í„° í˜•ì‹
                            },
                            body: new URLSearchParams({ // í¼ ë°ì´í„° êµ¬ì„±
                                boardNo: currentBoardNo,
                                replyContent: replyContent,
                                parentNo: parentReplyNo // ì¼ë°˜ ëŒ“ê¸€ì€ null, ë‹µê¸€ì€ ë¶€ëª¨ ëŒ“ê¸€ ë²ˆí˜¸
                            }).toString(),
                        })
                        .then(response => response.json()) // JSON ì‘ë‹µ íŒŒì‹±
                        .then(data => {
                            if (data.status === 'success') {
                                alert(data.message);
                                replyForm.remove(); // í¼ ì œê±°
                                // ëŒ“ê¸€ ëª©ë¡ì„ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜, ìƒˆë¡œ ì¶”ê°€ëœ ëŒ“ê¸€ì„ ë™ì ìœ¼ë¡œ DOMì— ì¶”ê°€í•˜ëŠ” ë¡œì§ í•„ìš”
                                window.location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (ê°„ë‹¨í•œ ë°©ë²•)
                            } else {
                                alert('ì˜¤ë¥˜: ' + data.message);
                            }
                        })
                        .catch(error => {
                            console.error('ëŒ“ê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                            alert('ëŒ“ê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                        });
                    } else {
                        alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    }
                });
            }
	    });
	});
	 // 3. ë©”ì¸ ëŒ“ê¸€ ì…ë ¥ì°½ ë¡œì§
	    const mainReplyInputField = document.getElementById('replyInputField');
	    const submitMainReplyButton = document.getElementById('submitReplyButton');

	    mainReplyInputField.addEventListener('input', function() {
	        submitMainReplyButton.disabled = this.value.trim() === '';
	        submitMainReplyButton.classList.toggle('active', this.value.trim() !== '');
	    });

	    submitMainReplyButton.addEventListener('click', function() {
	        const replyContent = mainReplyInputField.value;
	        const currentBoardNo = /*[[${post.boardNo}]]*/ 0; // Thymeleafë¡œ ê²Œì‹œë¬¼ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸°
	        
	        if (replyContent.trim() !== '') {
	            fetch('/community/addReply', { // ì»¨íŠ¸ë¡¤ëŸ¬ì˜ @PostMapping ê²½ë¡œ
	                method: 'POST',
	                headers: {
	                    'Content-Type': 'application/x-www-form-urlencoded',
	                },
	                body: new URLSearchParams({
	                    boardNo: currentBoardNo,
	                    replyContent: replyContent
	                    // parentNoëŠ” ì¼ë°˜ ëŒ“ê¸€ì´ë¯€ë¡œ ì „ë‹¬í•˜ì§€ ì•ŠìŒ (null ì²˜ë¦¬)
	                }).toString(),
	            })
	            .then(response => response.json())
	            .then(data => {
	                if (data.status === 'success') {
	                    // alert(data.message); // ëŒ“ê¸€ ì…ë ¥ ì„±ê³µ ì‹œ ì•Œë¦¼ ì œê±°
	                    mainReplyInputField.value = ''; // ì…ë ¥ì°½ ë¹„ìš°ê¸°
	                    submitMainReplyButton.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”
	                    submitMainReplyButton.classList.remove('active'); // active í´ë˜ìŠ¤ ì œê±°
	                    window.location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ëŒ“ê¸€ ëª©ë¡ ì—…ë°ì´íŠ¸
	                } else {
	                    alert('ì˜¤ë¥˜: ' + data.message);
	                }
	            })
	            .catch(error => {
	                console.error('ëŒ“ê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
	                alert('ëŒ“ê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
	            });
	        } else {
	            alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
	        }
	    });

	});
	// ë©”ë‰´ í† ê¸€ ê¸°ëŠ¥
	document.addEventListener('DOMContentLoaded', function () {
		// ìˆ˜ì • ë° ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
		 const boardNo = /*[[${post.boardNo}]]*/ 0; // ê²Œì‹œê¸€ ë²ˆí˜¸
		 const loggedInUserId = /*[[${loggedInUserId}]]*/ null; // ë¡œê·¸ì¸ ì‚¬ìš©ì ID
		 const postTitleElement = document.querySelector('.post-title');
	     const postBodyElement = document.querySelector('.post-body');
	     const postContentWrapper = document.querySelector('.post .content'); // ê²Œì‹œë¬¼ ë‚´ìš© ì „ì²´ë¥¼ ê°ì‹¸ëŠ” div
	     
	     let originalPostTitle = postTitleElement.textContent.trim();
	     let originalPostBody = postBodyElement.textContent.trim();
		 
		// ê²Œì‹œê¸€ 'ìˆ˜ì •í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		    const editPostBtn = document.getElementById('editPostBtn');
		    if (editPostBtn) {
		        editPostBtn.addEventListener('click', function(e) {
		            e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ë°©ì§€
		            e.stopPropagation(); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸° ë°©ì§€
		            
		         	// ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸°
		            this.closest('.dropdown-menu').style.display = 'none';
		            
		         	// ì´ë¯¸ ìˆ˜ì • ì¤‘ì¸ ë‹¤ë¥¸ ê²Œì‹œë¬¼ì´ ìˆë‹¤ë©´ (ë‹¤ì¤‘ ìˆ˜ì • ë°©ì§€, ì´ í˜ì´ì§€ì—ì„  ë¶ˆí•„ìš”í•  ìˆ˜ ìˆì§€ë§Œ ì•ˆì „í•˜ê²Œ)
		            document.querySelectorAll('.post-edit-form').forEach(form => form.remove());
		            postTitleElement.style.display = 'block';
		            postBodyElement.style.display = 'block'; // ì›ë³¸ ë³´ì´ê²Œ

		            // ê²Œì‹œë¬¼ ì œëª©ê³¼ ë³¸ë¬¸ì„ í¸ì§‘ ê°€ëŠ¥í•œ í•„ë“œë¡œ ë³€ê²½
		            postTitleElement.style.display = 'none'; // ì œëª© ìˆ¨ê¸°ê¸°
		            postBodyElement.style.display = 'none';  // ë³¸ë¬¸ ìˆ¨ê¸°ê¸°
		            
		            const editForm = document.createElement('div');
		            editForm.classList.add('post-edit-form'); // ìƒˆë¡œìš´ í´ë˜ìŠ¤ ì¶”ê°€
		            editForm.innerHTML = `
		                <input type="text" class="edit-title-input" value="${originalPostTitle}">
		                <textarea class="edit-body-textarea">${originalPostBody}</textarea>
		                <div class="edit-buttons" style="display: flex; justify-content: flex-end; margin-top: 10px; gap: 10px;">
		                    <button type="button" class="button-base button-outline save-post-edit-btn">ìˆ˜ì •</button>
		                    <button type="button" class="button-base button-outline cancel-post-edit-btn">ì·¨ì†Œ</button>
		                </div>
		            `;
		            
		            // postContentWrapper.appendChild(editForm); // ì´ ì¤„ì€ ì—¬ì „íˆ ì œê±°ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
		            // 1. í•´ë‹¹ ê²Œì‹œë¬¼ì˜ .comment-count ìš”ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤.
		            const commentCountElement = postContentWrapper.querySelector('.comment-count');
		
		            if (commentCountElement) {
		                // 2. comment-count ìš”ì†Œ ë°”ë¡œ ì•ì— editFormì„ ì‚½ì…í•©ë‹ˆë‹¤. (**** ì´ ë¶€ë¶„ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤ ****)
		                commentCountElement.before(editForm); // Element.before() ë©”ì„œë“œ ì‚¬ìš© (ê¶Œì¥)
		                // ë˜ëŠ” êµ¬í˜• ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•´:
		                // commentCountElement.parentElement.insertBefore(editForm, commentCountElement);
		            } else {
		                // ë§Œì•½ ì–´ë–¤ ì´ìœ ë¡œ comment-countë¥¼ ì°¾ì§€ ëª»í–ˆë‹¤ë©´,
		                // ê¸°ì¡´ì²˜ëŸ¼ postContentWrapperì˜ ë§ˆì§€ë§‰ì— ì¶”ê°€í•©ë‹ˆë‹¤ (ëŒ€ì•ˆ).
		                postContentWrapper.appendChild(editForm);
		                console.warn("'.comment-count' ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´, 'post-edit-form'ì´ 'postContentWrapper'ì˜ ë§ˆì§€ë§‰ì— ì¶”ê°€ë©ë‹ˆë‹¤.");
		            }

		            const editTitleInput = editForm.querySelector('.edit-title-input');
		            const editBodyTextarea = editForm.querySelector('.edit-body-textarea');
		            const savePostEditBtn = editForm.querySelector('.save-post-edit-btn');
		            const cancelPostEditBtn = editForm.querySelector('.cancel-post-edit-btn');

		            // textarea ë†’ì´ ìë™ ì¡°ì ˆ (ì„ íƒ ì‚¬í•­)
		            editBodyTextarea.addEventListener('input', function() {
		                this.style.height = 'auto';
		                this.style.height = (this.scrollHeight) + 'px';
		            });
		            editBodyTextarea.style.height = 'auto';
		            editBodyTextarea.style.height = (editBodyTextarea.scrollHeight) + 'px';

		            // 'ìˆ˜ì •' ë²„íŠ¼ (ì €ì¥) í´ë¦­ ì´ë²¤íŠ¸
		            savePostEditBtn.addEventListener('click', function() {
		                const newTitle = editTitleInput.value.trim();
		                const newBody = editBodyTextarea.value.trim();

		                if (newTitle === '' || newBody === '') {
		                    alert('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
		                    return;
		                }
		                if (newTitle === originalPostTitle && newBody === originalPostBody) {
		                    alert('ìˆ˜ì •ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
		                    editForm.remove();
		                    postTitleElement.style.display = 'block';
		                    postBodyElement.style.display = 'block';
		                    return;
		                }
		             // AJAX ìš”ì²­ ë³´ë‚´ê¸°
		                fetch(`/community/updatePost`, { // ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸
		                    method: 'POST',
		                    headers: {
		                        'Content-Type': 'application/x-www-form-urlencoded',
		                        // CSRF í† í°ì´ í•„ìš”í•  ê²½ìš° ì¶”ê°€
		                    },
		                    body: new URLSearchParams({
		                        boardNo: boardNo,
		                        boardTitle: newTitle,
		                        boardContent: newBody
		                    }).toString(),
		                })
		                .then(response => response.json())
		                .then(data => {
		                    if (data.success) {
		                        alert(data.message);
		                        // DOM ì—…ë°ì´íŠ¸: ìˆ˜ì •ëœ ë‚´ìš© ë°˜ì˜ ë° í¼ ì œê±°
		                        postTitleElement.textContent = newTitle;
		                        postBodyElement.textContent = newBody;
		                        postTitleElement.style.display = 'block';
		                        postBodyElement.style.display = 'block';
		                        editForm.remove();

		                        // ì›ë³¸ ë‚´ìš© ì—…ë°ì´íŠ¸ (ì¶”ê°€ ìˆ˜ì • ëŒ€ë¹„)
		                        originalPostTitle = newTitle;
		                        originalPostBody = newBody;
		                    } else {
		                        alert('ê²Œì‹œê¸€ ìˆ˜ì • ì‹¤íŒ¨: ' + data.message);
		                    }
		                })
		                .catch(error => {
		                    console.error('ê²Œì‹œê¸€ ìˆ˜ì • ì˜¤ë¥˜:', error);
		                    alert('ê²Œì‹œê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		                });
		            });
		             // 'ì·¨ì†Œ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		                cancelPostEditBtn.addEventListener('click', function() {
		                    // ìˆ˜ì • ì·¨ì†Œ: í¼ ì œê±° ë° ì›ë˜ í…ìŠ¤íŠ¸ ë³µì›
		                    editForm.remove();
		                    postTitleElement.textContent = originalPostTitle;
		                    postBodyElement.textContent = originalPostBody;
		                    postTitleElement.style.display = 'block';
		                    postBodyElement.style.display = 'block';
		                });
		        });
		    }
		    
		    // 'ì‚­ì œí•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		    const deletePostBtn = document.getElementById('deletePostBtn');
		    if (deletePostBtn) {
		        deletePostBtn.addEventListener('click', function(e) {
		            e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ë°©ì§€
		            const boardNo = /*[[${post.boardNo}]]*/ 0; // ê²Œì‹œê¸€ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸° (Thymeleafë¡œ ì£¼ì…ëœ ê°’)
		            if (confirm('ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
		                fetch(`/community/deletePost`, { // ì»¨íŠ¸ë¡¤ëŸ¬ì˜ @PostMapping ê²½ë¡œ
		                    method: 'POST', // DELETE ë©”ì†Œë“œë„ ê°€ëŠ¥ (Spring MVC ì„¤ì •ì— ë”°ë¼)
		                    headers: {
		                        'Content-Type': 'application/x-www-form-urlencoded',
		                        // CSRF í† í°ì´ í•„ìš”í•  ê²½ìš°, ì—¬ê¸°ì— ì¶”ê°€ (Spring Security ì‚¬ìš© ì‹œ)
		                        // 'X-CSRF-TOKEN': $('meta[name="_csrf"]').attr('content')
		                    },
		                    body: new URLSearchParams({ // boardNoë¥¼ ìš”ì²­ ë³¸ë¬¸ì— í¬í•¨
		                        boardNo: boardNo
		                    }).toString(),
		                })
		                .then(response => response.json())
		                .then(data => {
		                    if (data.success) {
		                        // alert(data.message);
		                        window.location.href = '/communityMain'; // ì‚­ì œ í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
		                    } else {
		                        alert('ì‚­ì œ ì‹¤íŒ¨: ' + data.message);
		                    }
		                })
		                .catch(error => {
		                    console.error('ì‚­ì œ ì˜¤ë¥˜:', error);
		                    alert('ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		                });
		            }
		        });
		    }
		 // 'ì‹ ê³ í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		 // ê¸°ì¡´ 'ì‹ ê³ í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •:
		 const reportPostBtn = document.getElementById('reportPostBtn');
		 if (reportPostBtn) {
		     reportPostBtn.addEventListener('click', function(e) {
		         e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ë°©ì§€
		         e.stopPropagation(); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸° ë°©ì§€
		         
		         // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸°
		         this.closest('.dropdown-menu').style.display = 'none';
		         
		         const boardNo = /*[[${post.boardNo}]]*/ 0; // ê²Œì‹œê¸€ ë²ˆí˜¸
		         
		         // í™•ì¸ ëŒ€í™”ìƒì
		         if (!confirm('ì´ ê²Œì‹œê¸€ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
		             return;
		         }
		         
		         // ì„œë²„ë¡œ ì‹ ê³  ìš”ì²­ ì „ì†¡
		         fetch('/community/report', {
		             method: 'POST',
		             headers: {
		                 'Content-Type': 'application/x-www-form-urlencoded',
		             },
		             body: `boardNo=${boardNo}&reason=user_report`
		         })
		         .then(response => response.json())
		         .then(data => {
		             if (data.success) {
		                 alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
		                 
		                 // ì‹ ê³  í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê±°ë‚˜ ì‹ ê³  ë²„íŠ¼ ìˆ¨ê¸°ê¸°
		                 // ì˜µì…˜ 1: ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
		                 // window.location.href = '/communityMain';
		                 
		                 // ì˜µì…˜ 2: ì‹ ê³  ë²„íŠ¼ì„ "ì‹ ê³ ë¨"ìœ¼ë¡œ ë³€ê²½
		                 this.textContent = 'ì‹ ê³ ë¨';
		                 this.style.color = '#999';
		                 this.style.cursor = 'default';
		                 this.onclick = null; // í´ë¦­ ì´ë²¤íŠ¸ ì œê±°
		                 
		             } else {
		                 alert(data.message || 'ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		             }
		         })
		         .catch(error => {
		             console.error('Error:', error);
		             alert('ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		         });
		     });
		 }

		 // ëŒ“ê¸€ ì‹ ê³  ê¸°ëŠ¥ë„ ì‹¤ì œ êµ¬í˜„ìœ¼ë¡œ ë³€ê²½
		 document.querySelectorAll('.report-reply-btn').forEach(button => {
		     button.addEventListener('click', function(e) {
		         e.preventDefault();
		         e.stopPropagation(); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸° ë°©ì§€
		         
		         // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸°
		         this.closest('.dropdown-menu').style.display = 'none';
		         
		         const replyNo = this.dataset.replyNo; // data-reply-no ê°’ ê°€ì ¸ì˜¤ê¸°
		         
		         // í™•ì¸ ëŒ€í™”ìƒì
		         if (!confirm('ì´ ëŒ“ê¸€ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
		             return;
		         }
		         
		         // ëŒ“ê¸€ ì‹ ê³ ëŠ” ëŒ“ê¸€ í…Œì´ë¸”ì— IS_REPORTED ì»¬ëŸ¼ì´ ìˆë‹¤ë©´ êµ¬í˜„ ê°€ëŠ¥
		         // í˜„ì¬ëŠ” ê²Œì‹œê¸€ ì‹ ê³ ë§Œ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ëŒ“ê¸€ ì‹ ê³ ëŠ” ì•Œë¦¼ë§Œ í‘œì‹œ
		         alert(`ëŒ“ê¸€ ì‹ ê³  ê¸°ëŠ¥ì€ í˜„ì¬ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤. (ëŒ“ê¸€ ë²ˆí˜¸: ${replyNo})`);
		         
		         // ì‹¤ì œ ëŒ“ê¸€ ì‹ ê³  APIê°€ êµ¬í˜„ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©:
		         /*
		         fetch('/community/reportReply', {
		             method: 'POST',
		             headers: {
		                 'Content-Type': 'application/x-www-form-urlencoded',
		             },
		             body: `replyNo=${replyNo}&reason=user_report`
		         })
		         .then(response => response.json())
		         .then(data => {
		             if (data.success) {
		                 alert('ëŒ“ê¸€ ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
		                 this.textContent = 'ì‹ ê³ ë¨';
		                 this.style.color = '#999';
		                 this.style.cursor = 'default';
		                 this.onclick = null;
		             } else {
		                 alert(data.message || 'ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		             }
		         })
		         .catch(error => {
		             console.error('Error:', error);
		             alert('ì‹ ê³  ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		         });
		         */
		     });
		 });
		    // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í† ê¸€ ê¸°ëŠ¥ (ê¸°ì¡´ ì½”ë“œ ìœ ì§€)
		    document.querySelectorAll('.menu-icon').forEach(icon => {
		        icon.addEventListener('click', function (e) {
		            e.stopPropagation();
		            const wrapper = this.closest('.menu-icon-wrapper');
		            const dropdown = wrapper.querySelector('.dropdown-menu');
					// ë‹¤ë¥¸ ëª¨ë“  ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹´ê¸°
		            document.querySelectorAll('.dropdown-menu').forEach(menu => {
		                if (menu !== dropdown) menu.style.display = 'none';
		            });
					// í˜„ì¬ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í† ê¸€
		            dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';
		        });
		    });
			// ë¬¸ì„œì˜ ë‹¤ë¥¸ ê³³ì„ í´ë¦­í•˜ë©´ ëª¨ë“  ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸°
		    document.addEventListener('click', function () {
		        document.querySelectorAll('.dropdown-menu').forEach(menu => {
		            menu.style.display = 'none';
		        });
		    });
		   // 'ëŒ“ê¸€ ìˆ˜ì •í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
	 	   document.querySelectorAll('.edit-reply-btn').forEach(button => {
		        button.addEventListener('click', function(e) {
		            e.preventDefault();
		            e.stopPropagation(); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ê°€ ë‹¤ì‹œ ì—´ë¦¬ì§€ ì•Šë„ë¡ í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨

		            const replyNo = this.dataset.replyNo;
		            const commentElement = this.closest('.comment');
		            const commentTextElement = commentElement.querySelector('.comment-text');
		            const originalCommentContent = commentTextElement.textContent.trim(); // ì›ë³¸ ëŒ“ê¸€ ë‚´ìš©
		            // ì´ë¯¸ ìˆ˜ì • ì¤‘ì¸ ëŒ“ê¸€ì´ ìˆë‹¤ë©´, í•´ë‹¹ ìˆ˜ì • í¼ ë‹«ê¸° (ë‹¤ì¤‘ ìˆ˜ì • ë°©ì§€)
		            document.querySelectorAll('.reply-edit-form').forEach(form => form.remove());
		            document.querySelectorAll('.comment-text').forEach(text => text.style.display = 'block');
		            
		            // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸°
		            this.closest('.dropdown-menu').style.display = 'none';

		            // ëŒ“ê¸€ ë‚´ìš©ì„ textareaë¡œ ë³€ê²½
		            commentTextElement.style.display = 'none'; // ê¸°ì¡´ í…ìŠ¤íŠ¸ ìˆ¨ê¸°ê¸°

		            const editForm = document.createElement('div');
		            editForm.classList.add('reply-edit-form'); // ìƒˆë¡œìš´ í´ë˜ìŠ¤ ì¶”ê°€ (ìŠ¤íƒ€ì¼ë§ ìœ„í•¨)
		            editForm.innerHTML = `
		                <textarea class="re-reply-input-field">${originalCommentContent}</textarea>
		                <div class="edit-buttons" style="display: flex; justify-content: flex-end; margin-top: 5px; gap: 5px;">
		                    <button type="button" class="button-base button-outline save-edit-btn">ìˆ˜ì •</button>
		                    <button type="button" class="button-base button-outline cancel-edit-btn">ì·¨ì†Œ</button>
		                </div>
		            `;
		            commentTextElement.after(editForm); // ê¸°ì¡´ í…ìŠ¤íŠ¸ ë°”ë¡œ ë’¤ì— í¼ ì‚½ì…

		            const editTextarea = editForm.querySelector('.re-reply-input-field');
		            const saveEditBtn = editForm.querySelector('.save-edit-btn');
		            const cancelEditBtn = editForm.querySelector('.cancel-edit-btn');

		            // textarea ë†’ì´ ìë™ ì¡°ì ˆ (ì„ íƒ ì‚¬í•­)
		            editTextarea.addEventListener('input', function() {
		                this.style.height = 'auto';
		                this.style.height = (this.scrollHeight) + 'px';
		            });
		            editTextarea.style.height = 'auto'; // ì´ˆê¸° ë†’ì´ ì„¤ì •
		            editTextarea.style.height = (editTextarea.scrollHeight) + 'px';


		            // 'ìˆ˜ì •' ë²„íŠ¼ (ì €ì¥) í´ë¦­ ì´ë²¤íŠ¸
		            saveEditBtn.addEventListener('click', function() {
		                const newContent = editTextarea.value.trim();
		                if (newContent === '') {
		                    alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
		                    return;
		                }
		                if (newContent === originalCommentContent) {
		                    alert('ìˆ˜ì •ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
		                    // ìˆ˜ì • í¼ ë‹«ê¸°
		                    editForm.remove();
		                    commentTextElement.textContent = originalCommentContent;
		                    commentTextElement.style.display = 'block';
		                    return;
		                }

		                fetch(`/community/updateReply/${replyNo}`, { // ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸
		                    method: 'POST', // PUT ë˜ëŠ” PATCHë„ ê°€ëŠ¥í•˜ì§€ë§Œ POSTë¡œ í†µì¼
		                    headers: {
		                        'Content-Type': 'application/x-www-form-urlencoded',
		                    },
		                    body: new URLSearchParams({
		                        replyContent: newContent
		                    }).toString(),
		                })
		                .then(response => response.json())
		                .then(data => {
		                    if (data.success) {
		                        // alert(data.message); ëŒ“ê¸€ ìˆ˜ì • ì™„ë£Œ ì‹œ 'ëŒ“ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' ì•Œë¦¼ì°½ ì œê±°
		                        // DOM ì—…ë°ì´íŠ¸: ìˆ˜ì •ëœ ë‚´ìš© ë°˜ì˜ ë° í¼ ì œê±°
		                        commentTextElement.textContent = newContent;
		                        commentTextElement.style.display = 'block';
		                        editForm.remove();
		                    } else {
		                        alert('ëŒ“ê¸€ ìˆ˜ì • ì‹¤íŒ¨: ' + data.message);
		                    }
		                })
		                .catch(error => {
		                    console.error('ëŒ“ê¸€ ìˆ˜ì • ì˜¤ë¥˜:', error);
		                    alert('ëŒ“ê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
		                });
		            });

		            // 'ì·¨ì†Œ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		            cancelEditBtn.addEventListener('click', function() {
		                // ìˆ˜ì • ì·¨ì†Œ: í¼ ì œê±° ë° ì›ë˜ í…ìŠ¤íŠ¸ ë³µì›
		                editForm.remove();
		                commentTextElement.textContent = originalCommentContent; // ì›ë³¸ ë‚´ìš©ìœ¼ë¡œ ë³µì›
		                commentTextElement.style.display = 'block';
		            });
		        });
		    });
	 		// 'ì‚­ì œí•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
	 		const deleteModal = document.getElementById('deleteModal');
		    const confirmDeleteButton = document.getElementById('confirmDelete');
		    const cancelDeleteButton = document.getElementById('cancelDelete');
		    
		    let itemToDelete = null; // ì‚­ì œí•  ê²Œì‹œê¸€/ëŒ“ê¸€ DOM ìš”ì†Œë¥¼ ì €ì¥
		    let currentId = null;     // ê²Œì‹œê¸€ ë˜ëŠ” ëŒ“ê¸€ì˜ ID (boardNo ë˜ëŠ” replyNo)
		    let isPostDelete = false; // ê²Œì‹œê¸€ ì‚­ì œì¸ì§€ ëŒ“ê¸€ ì‚­ì œì¸ì§€ êµ¬ë¶„í•˜ëŠ” í”Œë˜ê·¸

	 	    document.querySelectorAll('#deletPosthBtn, .delete-reply-btn').forEach(button => {
	 	        button.addEventListener('click', function(e) {
	 	            e.preventDefault();	// ê¸°ë³¸ ë™ì‘ ë°©ì§€
	 	           	e.stopPropagation(); // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹«ê¸° ë°©ì§€
	 	           	// ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ë‹´ê¸°
	 	           	this.closest('.dropdown-menu').style.display = 'none';
	 	           	
		 	        // ì–´ë–¤ í•­ëª©ì„ ì‚­ì œí•  ê²ƒì¸ì§€ ì •ë³´ ì €ì¥
		 	            if (this.id === 'deletePostBtn') { // ê²Œì‹œê¸€ ì‚­ì œ ë²„íŠ¼
		 	                currentId = /*[[${post.boardNo}]]*/ 0;
		 	                itemToDelete = document.querySelector('.post'); // ê²Œì‹œê¸€ ì „ì²´ ìš”ì†Œ
		 	                isPostDelete = true;
		 	            } else if (this.classList.contains('delete-reply-btn')) { // ëŒ“ê¸€ ì‚­ì œ ë²„íŠ¼
		 	                currentId = this.dataset.replyNo;
		 	                itemToDelete = this.closest('.comment'); // ëŒ“ê¸€ ì „ì²´ ìš”ì†Œ
		 	                isPostDelete = false;
		 	            }
	
		 	            deleteModal.style.display = 'flex'; // ëª¨ë‹¬ í‘œì‹œ (CSSì—ì„œ flexë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ)
		 	        });
		 	    });
	 	    // 'ì˜ˆ' ë²„íŠ¼ í´ë¦­ ì‹œ ì‚­ì œ ìˆ˜í–‰
	 	    confirmDeleteButton.addEventListener('click', () => {
	 	        deleteModal.style.display = 'none'; // ëª¨ë‹¬ ìˆ¨ê¹€

	 	        if (isPostDelete) {
	 	            // ê²Œì‹œê¸€ ì‚­ì œ ë¡œì§ í˜¸ì¶œ (CommunityControllerì˜ deletePost API)
	 	            fetch(`/community/deletePost/${currentId}`, {
	 	                method: 'POST',
	 	                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
	 	            })
	 	            .then(response => response.json())
	 	            .then(data => {
	 	                if (data.success) {
	 	                    alert(data.message);
	 	                    window.location.href = '/communityMain'; // ê²Œì‹œê¸€ ì‚­ì œ í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
	 	                } else {
	 	                    alert('ê²Œì‹œê¸€ ì‚­ì œ ì‹¤íŒ¨: ' + data.message);
	 	                }
	 	            })
	 	            .catch(error => {
	 	                console.error('ê²Œì‹œê¸€ ì‚­ì œ ì˜¤ë¥˜:', error);
	 	                alert('ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
	 	            });
	 	        } else {
	 	            // ëŒ“ê¸€ ì‚­ì œ ë¡œì§ í˜¸ì¶œ (CommunityControllerì˜ deleteComment API)
	 	            fetch(`/community/deleteComment`, {
	 	                method: 'POST',
	 	                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
	 	                body: new URLSearchParams({ replyNo: currentId }).toString(),
	 	            })
	 	            .then(response => response.json())
	 	            .then(data => {
	 	                if (data.success) {
	 	                    // alert(data.message);
	 	                    if (itemToDelete) {
	 	                        itemToDelete.remove(); // DOMì—ì„œ ëŒ“ê¸€ ìš”ì†Œ ì œê±°
	 	                        // ëŒ“ê¸€ ìˆ˜ ì—…ë°ì´íŠ¸ (ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ì˜ ëŒ“ê¸€ ìˆ˜)
	 	                        const commentCountSpan = document.querySelector('.comment-count span');
	 	                        if (commentCountSpan) {
	 	                            let currentCount = parseInt(commentCountSpan.textContent);
	 	                            if (!isNaN(currentCount) && currentCount > 0) {
	 	                                commentCountSpan.textContent = (currentCount - 1);
	 	                            }
	 	                        }
	 	                    }
	 	                } else {
	 	                    alert('ëŒ“ê¸€ ì‚­ì œ ì‹¤íŒ¨: ' + data.message);
	 	                }
	 	            })
	 	            .catch(error => {
	 	                console.error('ëŒ“ê¸€ ì‚­ì œ ì˜¤ë¥˜:', error);
	 	                alert('ëŒ“ê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
	 	            });
	 	        }
	 	        // ìƒíƒœ ì´ˆê¸°í™”
	 	        /* itemToDelete = null;
	 	        currentId = null;
	 	        isPostDelete = false; */
	 	    });

	 	    // 'ì•„ë‹ˆì˜¤' ë²„íŠ¼ í´ë¦­ ì‹œ ì‚­ì œ ì·¨ì†Œ
	 	    cancelDeleteButton.addEventListener('click', () => {
	 	        deleteModal.style.display = 'none'; // ëª¨ë‹¬ ìˆ¨ê¹€
	 	        // ìƒíƒœ ì´ˆê¸°í™”
	 	        itemToDelete = null;
	 	        currentId = null;
	 	        isPostDelete = false;
	 	    });
	 	            
	 	    // 'ëŒ“ê¸€ ì‹ ê³ í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
	 	    document.querySelectorAll('.report-reply-btn').forEach(button => {
	 	        button.addEventListener('click', function(e) {
	 	            e.preventDefault();
	 	            const replyNo = this.dataset.replyNo; // data-reply-no ê°’ ê°€ì ¸ì˜¤ê¸°
	 	            alert(`ëŒ“ê¸€ ë²ˆí˜¸ ${replyNo} ì‹ ê³ í•˜ê¸° (ê¸°ëŠ¥ ë¯¸êµ¬í˜„)`);
	 	            // ì—¬ê¸°ì— ëŒ“ê¸€ ì‹ ê³  ë¡œì§ (ì˜ˆ: ëª¨ë‹¬ íŒì—…, AJAX ìš”ì²­ ë“±)
	 	        });
	 	    });
	});

	/*]]>*/
	</script>
</body>
</html>