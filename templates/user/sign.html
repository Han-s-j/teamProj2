<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ë¡œê·¸ì¸/íšŒì›ê°€ì… | A.P.T</title>

<!-- Pretendard(Font) -->
<link rel="stylesheet" th:href="@{/css/font.css}" />
	
<!-- Favicon -->
<link rel="icon" href="/icons/favicon.png" type="image/png">

<style>
html, body {
	margin: 0;
	padding: 0;
	height: 100%;
	font-family: 'Pretendard', sans-serif;
}

body {
	display: flex;
	flex-direction: column;
	min-height: 100vh;
}

.logo {
	position: absolute;
	top: 30px;
	left: 40px;
	font-size: 30px;
	font-weight: 800;
	color: #4281FF;
}

.login-container {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	perspective: 1000px;
}

.login-title {
	font-size: 36px;
	font-weight: 800;
	margin-bottom: 24px;
	color: #4281FF;
}

.tab-buttons {
	display: flex;
	margin-bottom: 16px;
}

.tab-buttons button {
	background: none;
	border: none;
	font-size: 18px;
	margin: 0 12px;
	cursor: pointer;
	color: #5D5D5D;
	font-weight: 600;
	transition: color 0.3s ease, border-bottom 0.3s ease;
}

.tab-buttons button:hover {
	color: #4281FF;
}

.tab-buttons button.active {
	color: #4281FF;
}

.login-box {
	background: #fff;
	border-radius: 20px;
	border: 0.7px solid #C7C7C7;
	box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.15);
	width: 25%;
	margin: 0 auto;
	position: relative;
	transform-style: preserve-3d;
	transition: transform 0.6s, height 0.6s ease-in-out;
	overflow: hidden;
}

.form-wrapper {
	position: absolute;
	width: 100%;
	backface-visibility: hidden;
	transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out;
	padding: 60px;
	box-sizing: border-box;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.form-wrapper#login-form {
	transform: rotateY(0deg);
	opacity: 1;
	z-index: 2;
}

.form-wrapper#signup-form {
	transform: rotateY(180deg);
	opacity: 0;
	z-index: 1;
}

.login-box.active-login {
	height: 380px;
}

.login-box.active-signup {
	height: 480px;
}

.login-box.flipped #login-form {
	transform: rotateY(-180deg);
	opacity: 0;
	z-index: 1;
}

.login-box.flipped #signup-form {
	transform: rotateY(0deg);
	opacity: 1;
	z-index: 2;
}

.login-box form {
	width: 100%;
	display: flex;
	flex-direction: column;
	align-items: center;
}

.login-box input {
	width: 85%;
	padding: 12px;
	margin-bottom: 20px;
	border: 1px solid #ccc;
	border-radius: 10px;
	font-size: 14px;
	outline: none;
	transition: border-color 0.3s ease;
}

.login-box button[type="submit"] {
	width: 40%;
	padding: 12px;
	background-color: #4281FF;
	color: white;
	border: none;
	border-radius: 6px;
	font-size: 14px;
	cursor: pointer;
	margin-top: 40px;
	transition: background-color 0.3s ease;
}

.login-box button[type="submit"]:hover {
	background-color: #366DD6;
}

label {
	display: block;
	width: 90%;
	text-align: left;
	margin-bottom: 8px;
	font-weight: bold;
	color: #333;
	font-size: 14px;
}

.bottom-links {
	margin-top: 16px;
	font-size: 16px;
	color: #5D5D5D;
	transition: opacity 0.3s ease;
}

.bottom-links.hidden {
	opacity: 0;
	pointer-events: none;
}

.bottom-links span {
	margin: 0 8px;
}

.signup-text {
	opacity: 0;
	margin-top: -30px;
	font-size: 16px;
	color: #5D5D5D;
	text-align: center;
}

a {
	text-decoration: none;
	color: #5D5D5D;
	transition: color 0.3s ease;
}

a:hover {
	color: #4281FF;
}

.login-box input:focus {
	border-color: #4281FF;
}

/* ì—ëŸ¬ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
.error-message {
	color: #FF6B6B;
	font-size: 14px;
	margin-bottom: 10px;
	text-align: center;
}

/* --- Mobile Responsiveness --- */
@media (max-width: 768px) {
	.logo {
		top: 20px;
		left: 20px;
		font-size: 24px;
	}

	.login-title {
		font-size: 28px;
		margin-bottom: 16px;
	}

	.tab-buttons button {
		font-size: 16px;
		margin: 0 8px;
	}

	.login-box {
		width: 85%; /* Make it wider on mobile */
		max-width: 350px; /* Keep a max-width for very small screens */
	}

	.form-wrapper {
		padding: 30px 20px; /* Reduce padding inside the form wrapper */
	}

	.login-box input {
		width: 90%; /* Adjust input width to fit better */
		padding: 10px;
		margin-bottom: 15px;
		font-size: 13px;
	}

	.login-box button[type="submit"] {
		width: 50%; /* Make button a bit wider */
		padding: 10px;
		font-size: 13px;
		margin-top: 25px; /* Adjust button margin */
	}

	label {
		width: 90%; /* Adjust label width */
		font-size: 13px;
		margin-bottom: 5px;
	}

	.bottom-links {
		font-size: 14px;
		margin-top: 10px;
	}

	.bottom-links span {
		margin: 0 5px;
	}

	.signup-text {
		font-size: 14px;
		margin-top: 15px; /* Adjust margin for visible signup text */
	}
	
	/* Adjust height for mobile forms */
	.login-box.active-login {
		height: 320px; /* Smaller height for login form */
	}

	.login-box.active-signup {
		height: 420px; /* Smaller height for signup form */
	}
	
	.error-message {
		font-size: 12px;
	}
}

@media (max-width: 480px) {
	.logo {
		font-size: 20px;
	}

	.login-title {
		font-size: 24px;
		margin-bottom: 12px;
	}

	.tab-buttons button {
		font-size: 14px;
		margin: 0 5px;
	}

	.login-box {
		width: 90%; /* Even wider on very small screens */
	}

	.form-wrapper {
		padding: 25px 15px; /* Further reduce padding */
	}

	.login-box input {
		padding: 8px;
		font-size: 12px;
	}

	.login-box button[type="submit"] {
		width: 60%;
		padding: 8px;
		font-size: 12px;
		margin-top: 20px;
	}

	label {
		font-size: 12px;
	}

	.bottom-links {
		font-size: 12px;
	}

	.signup-text {
		font-size: 12px;
		margin-top: 10px;
	}
	
	.login-box.active-login {
		height: 280px; /* Smallest height for login form */
	}

	.login-box.active-signup {
		height: 380px; /* Smallest height for signup form */
	}
	
	.error-message {
		font-size: 11px;
	}
}
</style>
</head>

<body>
	<div class="login-container">
		<a th:href="@{/}" class="logo-area-link"><div class="login-title">A.P.T</div></a>
		<div class="tab-buttons">
			<button id="login-tab" class="active">ë¡œê·¸ì¸</button>
			<button id="signup-tab">íšŒì›ê°€ì…</button>
		</div>

		<div class="login-box">
			<div id="login-form" class="form-wrapper">
				<!-- ë¡œê·¸ì¸ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ -->
				<div th:if="${loginError}" class="error-message"
					th:text="${loginError}"></div>

				<form th:action="@{/login}" method="post">
					<label for="login-userid">ì•„ì´ë””</label> <input type="text"
						id="login-userid" name="userId" placeholder="ì•„ì´ë””" required /> <label
						for="login-password">ë¹„ë°€ë²ˆí˜¸</label> <input type="password"
						id="login-password" name="userPw" placeholder="ë¹„ë°€ë²ˆí˜¸" required />

					<button type="submit">ë¡œê·¸ì¸</button>
				</form>
			</div>

			<div id="signup-form" class="form-wrapper">
				<!-- íšŒì›ê°€ì… ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ -->
				<div th:if="${signupError}" class="error-message"
					th:text="${signupError}"></div>

				<form th:action="@{/signup}" method="post">
					<label for="signup-userid">ì•„ì´ë””</label> <input type="text"
						id="signup-userid" name="userId" placeholder="ì•„ì´ë””" required /> <label
						for="signup-password">ë¹„ë°€ë²ˆí˜¸</label> <input type="password"
						id="signup-password" name="userPw" placeholder="ë¹„ë°€ë²ˆí˜¸" required />

					<label for="signup-username">ë‹‰ë„¤ì„</label> <input type="text"
						id="signup-username" name="nickname" placeholder="ë‹‰ë„¤ì„" required />

					<button type="submit" id="signupButton">íšŒì›ê°€ì…</button>
				</form>
			</div>
		</div>

		<div class="bottom-links">
			<a href="#">ì•„ì´ë”” ì°¾ê¸°</a> <span>|</span> <a href="#">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
		</div>

		<div class="signup-text">
			<p>
				ì•„íŒŒíŠ¸ ì¸ì¦ í›„ ì„œë¹„ìŠ¤ ì´ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>íšŒì›ê°€ì… í›„ ë§ˆì´í˜ì´ì§€ì—ì„œ ì•„íŒŒíŠ¸ ì¸ì¦ì„ ì§„í–‰í•´ì£¼ì„¸ìš”!
			</p>
		</div>
	</div>

	<!-- footer ì‹œì‘ -->
	<footer
		style="background-color: #f2f2f2; padding: 15px 0; text-align: center; font-size: 14px; color: #666;">
		<div>
			<p style="margin: 0;">Â© 2025 A.P.T. All rights reserved.</p>
			<p style="margin: 5px 0 0;">
				Made with <span class="computer-icon">ğŸ’»</span> by íŒ€ EF
			</p>
		</div>
	</footer>
	<!-- footer ë -->

	<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script th:inline="javascript">
    const loginTab = document.getElementById("login-tab");
    const signupTab = document.getElementById("signup-tab");
    const loginForm = document.getElementById("login-form");
    const signupForm = document.getElementById("signup-form");
    const loginBox = document.querySelector(".login-box");
    const bottomLinks = document.querySelector(".bottom-links");
    const signupText = document.querySelector(".signup-text");

    document.addEventListener("DOMContentLoaded", () => {
      loginTab.classList.add("active");
      bottomLinks.classList.remove("hidden");
      loginBox.classList.add("active-login");
      loginBox.classList.remove("active-signup");

      // ì„œë²„ì—ì„œ íšŒì›ê°€ì… ì„±ê³µ í”Œë˜ê·¸ë¥¼ ë„˜ê²¨ì¤¬ì„ ë•Œë§Œ ì‘ë™
      const signupSuccess = [[${signupSuccess}]]; 
      
      if (signupSuccess) {
          // íšŒì›ê°€ì… ì„±ê³µ ì•Œë¦¼ì°½ ë„ìš°ê¸°
          alert("A.P.Tì˜ íšŒì›ì´ ë˜ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤ğŸ‰");

          // í­ì£½ íš¨ê³¼ ì‹¤í–‰
          confetti({
              particleCount: 100,
              spread: 70,
              origin: { y: 0.6 }
          });
          
          // íšŒì›ê°€ì… íƒ­ìœ¼ë¡œ ì „í™˜ (ì„ íƒ ì‚¬í•­, í•„ìš”ì‹œ í™œì„±í™”)
          // íšŒì›ê°€ì… í›„ ì´ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë  ë•Œ, íšŒì›ê°€ì… íƒ­ì„ ë³´ì—¬ì£¼ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ì£¼ì„ì„ í’€ì–´ì£¼ì„¸ìš”.
          // signupTab.click(); 
      }
    });

    loginTab.addEventListener("click", () => {
      loginTab.classList.add("active");
      signupTab.classList.remove("active");

      loginBox.classList.remove("flipped");
      loginBox.classList.remove("active-signup");
      loginBox.classList.add("active-login");

      loginForm.style.zIndex = "2";
      signupForm.style.zIndex = "1";
      signupText.style.opacity = "0";

      bottomLinks.classList.remove("hidden");
    });

    signupTab.addEventListener("click", () => {
      signupTab.classList.add("active");
      loginTab.classList.remove("active");

      loginBox.classList.add("flipped");
      loginBox.classList.remove("active-login");
      loginBox.classList.add("active-signup");

      loginForm.style.zIndex = "1";
      signupForm.style.zIndex = "2";
      signupText.style.opacity = "1";

      bottomLinks.classList.add("hidden");
    });
    
    // ì´ì „ì— ì¶”ê°€í–ˆë˜ íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì™„ì „íˆ ì‚­ì œí•©ë‹ˆë‹¤.
    // í­ì£½ íš¨ê³¼ì™€ ì•Œë¦¼ì€ ì˜¤ì§ ì„œë²„ ì‘ë‹µ(signupSuccess)ì— ì˜í•´ì„œë§Œ ë°œìƒí•˜ë„ë¡ í•©ë‹ˆë‹¤.
    /*
	document.getElementById('signupButton').addEventListener('click', function(event) {
	    event.preventDefault(); 
	    alert("A.P.Tì˜ íšŒì›ì´ ë˜ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤ğŸ‰");
	    confetti({
	        particleCount: 100, 
	        spread: 70,         
	        origin: { y: 0.6 }  
	    });
        const form = event.target.closest('form'); 
	    setTimeout(() => {
            if (form) {
                form.submit(); 
            }
        }, 1500); 
	});
    */
</script>
</body>

</html>