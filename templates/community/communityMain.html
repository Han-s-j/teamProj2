<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A.P.Tí†¡ | A.P.T</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- ì‚¬ì´ë“œë°” -->
<link rel="stylesheet" href="/css/sidebar.css">

<!-- í°íŠ¸ css -->
<link rel="stylesheet" th:href="@{/css/font.css}" />

<!-- Favicon -->
<link rel="icon" href="/icons/favicon.png" type="image/png">

<style>
/* ê¸°ë³¸ reset (ê°„ë‹¨í•˜ê²Œ) */
* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

body {
	background-color: #FDFDFD;
	/* ì‚¬ì´ë“œë°” ë„ˆë¹„ë§Œí¼ ì™¼ìª½ ì—¬ë°± (ì‚¬ì´ë“œë°”ê°€ ìˆë‹¤ë©´) */
	/* padding-left: 260px; */
	display: flex; /* bodyë¥¼ flex ì»¨í…Œì´ë„ˆë¡œ ì„¤ì • */
    flex-direction: column; /* ìì‹ ìš”ì†Œë“¤ì„ ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ë°°ì¹˜ */
    min-height: 100vh; /* bodyì˜ ìµœì†Œ ë†’ì´ë¥¼ ë·°í¬íŠ¸ ë†’ì´ì˜ 100%ë¡œ ì„¤ì • */
}

/* ì‚¬ì´ë“œë°”ì™€ ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ì„ ê°ì‹¸ëŠ” ë˜í¼ */
.main-content-wrapper {
    display: flex; /* ì‚¬ì´ë“œë°”ì™€ .container-mainì„ ê°€ë¡œë¡œ ë°°ì¹˜ */
    flex-grow: 1; /* ì´ ë˜í¼ê°€ í‘¸í„°ë¥¼ ì œì™¸í•œ ë‚¨ì€ ì„¸ë¡œ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•˜ë„ë¡ í•¨ */
    /* ì‚¬ì´ë“œë°”ê°€ fixedë‚˜ absoluteë¡œ ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´, ì‚¬ì´ë“œë°” ë„ˆë¹„ë§Œí¼ ì™¼ìª½ íŒ¨ë”© í•„ìš” */
    /* ì˜ˆ: padding-left: 250px; (ì‚¬ì´ë“œë°” ë„ˆë¹„) */
}


.container-main {
	max-width: 1000px;
	margin: 30px auto; /* ìƒí•˜ 30px, ì¢Œìš° ìë™ (ì¤‘ì•™ ì •ë ¬) */
	padding: 0 15px; /* ì¢Œìš° íŒ¨ë”© */
    flex-grow: 1; /* container-mainì´ main-content-wrapper ë‚´ì—ì„œ ë‚¨ì€ ê°€ë¡œ ê³µê°„ì„ ì±„ìš°ë„ë¡ */
                  /* ì´ flex-growëŠ” .main-content-wrapper ë‚´ë¶€ì—ì„œ ì‘ë™í•˜ë©°,
                     í‘¸í„°ë¥¼ ì•„ë˜ë¡œ ë°€ì–´ë‚´ëŠ” ì—­í• ì€ .main-content-wrapperê°€ í•©ë‹ˆë‹¤. */
}

/* --- ìƒë‹¨ ê²€ìƒ‰/ë²„íŠ¼ ì„¹ì…˜ --- */
.top-section {
	display: flex;
	justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
	align-items: center;
	margin-bottom: 30px;
	gap: 10px; /* ìš”ì†Œë“¤ ê°„ ê°„ê²© */
}

.search-input {
	width: 250px; /* ê³ ì • ë„ˆë¹„ */
	padding: 8px 15px 8px 35px; /* íŒ¨ë”©: ìƒ ìš° í•˜ ì¢Œ (ì™¼ìª½ì— ì•„ì´ì½˜ ê³µê°„) */
	border: 1px solid #ced4da;
	border-radius: 10px;
	font-size: 1rem;
	background-image: url('/icons/search.png');
	background-repeat: no-repeat;
	background-position: 10px center;
	background-size: 20px;
	outline: none; /* í¬ì»¤ìŠ¤ ì‹œ ì•„ì›ƒë¼ì¸ ì œê±° */
	transition: border-color 0.2s ease;
}

.search-input:focus {
	border-color: #62B0FF; /* í¬ì»¤ìŠ¤ ì‹œ ìƒ‰ìƒ ë³€ê²½ */
}

.action-buttons {
	display: flex;
	gap: 10px; /* ë²„íŠ¼ ê°„ ê°„ê²© */
}

.button-base {
	padding: 8px 15px;
	border-radius: 10px;
	font-weight: 600;
	font-size: 14px;
	cursor: pointer;
	text-decoration: none; /* ë§í¬ì¸ ê²½ìš° ë°‘ì¤„ ì œê±° */
	display: inline-block; /* íŒ¨ë”©, ë§ˆì§„ ì ìš©ì„ ìœ„í•´ */
	text-align: center;
	border: 1px solid transparent; /* ê¸°ë³¸ í…Œë‘ë¦¬ ì„¤ì • */
	transition: background-color 0.1s ease, color 0.1s ease, border-color 0.1s ease;
}

/* ë‚´ í• ë™ */
.button-outline {
	background-color: transparent;
	color: #62B0FF;
	border-color: #62B0FF;
}

.button-outline:hover {
	background-color: #62B0FF;
	color: #fff;
}

/* ê¸€ ì“°ê¸° */
.button-primary {
	background-color: #62B0FF;
	color: #FFFFFF;
	border-color: #62B0FF;
}

.button-primary:hover {
	background-color: #fff;
	color: #62B0FF;
}

/* --- ì¤‘ì•™ ë°°ë„ˆ ì„¹ì…˜ --- */
.banner-section {
	display: flex;
	/* flex-wrap: wrap; ì œê±° ë˜ëŠ” nowrap ëª…ì‹œ */
	/* flex-wrap: nowrap; /* ì¤„ë°”ê¿ˆì„ ì›ì¹˜ ì•Šìœ¼ë¯€ë¡œ nowrap ìœ ì§€ ë˜ëŠ” ì œê±° */
	gap: 20px; /* ì¹´ë“œ ê°„ ê°„ê²© */
	margin-bottom: 30px;
	align-items: stretch; /* ì¹´ë“œ ê°„ê²© ë™ì¼í•˜ê²Œ ë§ì¶¤ */
}

.banner-card {
	/* flex ì†ì„±ì€ ê°œë³„ ì¹´ë“œ (apt-talk, apt-ping)ì— ì§€ì •í•©ë‹ˆë‹¤. */
	/* ì—¬ê¸°ì„œëŠ” ê³µí†µì ì¸ ìŠ¤íƒ€ì¼ë§Œ ìœ ì§€ */
	border-radius: 15px;
	padding: 25px;
	min-height: 180px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	position: relative;
	overflow: hidden;
}

.banner-card-apt-talk {
    flex: 1 1 calc(75% - 10px);
    flex-direction: row; /* í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ë¥¼ ê°€ë¡œë¡œ ë°°ì¹˜ */
    align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    justify-content: space-between; /* í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ ì‚¬ì´ì˜ ê³µê°„ ë¶„ë°° */
    padding-right: 10px; /* ì´ë¯¸ì§€ì™€ì˜ ê°„ê²©ì„ ìœ„í•´ ì˜¤ë¥¸ìª½ íŒ¨ë”© ì¡°ì ˆ */
}

/* A.P.T í†¡ ë‚´ë¶€ í…ìŠ¤íŠ¸ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ */
.banner-card-apt-talk .text-content {
    flex-shrink: 1; /* í…ìŠ¤íŠ¸ê°€ ì¤„ì–´ë“¤ ìˆ˜ ìˆë„ë¡ í—ˆìš© */
    padding-right: 15px; /* í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ ì‚¬ì´ì˜ ê°„ê²© */
    font-size: 36px;
    font-weight: 700;
    color: #62B0FF;
}

.banner-card-apt-talk .text-content p {
	font-size: 24px;
	margin-top: 10px;
	color: #879AAE;
}

.banner-card-apt-ping {
    /* flex-grow: 1 (ë‚¨ëŠ” ê³µê°„ì„ ì°¨ì§€), flex-shrink: 1 (í•„ìš”ì‹œ ì¤„ì–´ë“¦), flex-basis: 25% */
    flex: 1 1 350px; /* gapì„ ê³ ë ¤í•˜ì—¬ flex-basis ì„¤ì •. grow/shrink í—ˆìš© */
    width: 500px;
    height: auto;
}

/* APT í†¡ ì¹´ë“œ ë‚´ì˜ í° ì•„ì´ì½˜ ì´ë¯¸ì§€ */
.apt-talk-large-icon {
    width: 160px; /* ì´ë¯¸ì§€ í¬ê¸° ì¡°ì ˆ */
    height: auto;
    flex-shrink: 0; /* ì´ë¯¸ì§€ í¬ê¸°ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ê³ ì • */
    /* opacity: 1; (íˆ¬ëª…ë„: ìŠ¤íƒ€ì¼ ì¡°ì • ì‹œ ì¶”ê°€) */
    /* position, bottom, right ë“± ì œê±° (flex ì•„ì´í…œì´ë¯€ë¡œ) */
}

/* APT í•‘ ì¹´ë“œ ë‚´ë¶€ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
.banner-card-apt-ping .full-image-cover {
    width: 100%; /* ë¶€ëª¨(banner-card-apt-ping) ë„ˆë¹„ì— ë§ì¶¤ */
    height: 100%; /* ë¶€ëª¨(banner-card-apt-ping) ë†’ì´ì— ë§ì¶¤ */
    object-fit: cover; /* ì´ë¯¸ì§€ê°€ ì¹´ë“œ ì˜ì—­ì„ ê½‰ ì±„ìš°ë˜ ë¹„ìœ¨ ìœ ì§€ */
    transition: transform 0.3s ease-in-out;
}

.banner-card-apt-ping .full-image-cover:hover {
	transform: scale(1.02);
}

/* ë°°ë„ˆ ì¹´ë“œ ì´ë¯¸ì§€ */
.banner-card .banner-image {
	position: absolute;
	opacity: 0.8;
	pointer-events: none; /* ì´ë¯¸ì§€ê°€ í…ìŠ¤íŠ¸ ìœ„ì— ìˆì–´ë„ í´ë¦­ ì•ˆë˜ë„ë¡ */
}

.banner-image.apt-talk-img {
	bottom: 10px;
	right: 10px;
	width: 140px;
}

/* --- ê²Œì‹œê¸€ ëª©ë¡ ì„¹ì…˜ --- */
.post-card {
	background-color: #ffffff;
	border-radius: 15px;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
	padding: 20px;
	margin-bottom: 20px;
	display: flex;
	flex-direction: column;
}

.post-header {
	display: flex;
	align-items: center;
	margin-bottom: 15px;
}

.post-profile-pic {
	width: 45px;
	height: 45px;
	border-radius: 50%;
	background-color: #ffe0b2;
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 1.5em;
	color: #ff9800;
	margin-right: 15px;
	flex-shrink: 0;
	overflow: hidden;
}

.post-profile-pic img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.post-info h5 {
	margin: 0;
	font-size: 1.1em;
	font-weight: bold;
	color: #292929;
}

.post-info p {
	margin: 0;
	font-size: 0.85em;
	color: #777;
}

.post-time {
	margin-left: auto;
	font-size: 0.8em;
	color: #999;
	visibiliy: hidden; /* ì´ˆê¸°ì— ë³´ì´ì§€ ì•Šê²Œ */
}

.post-content {
	font-size: 0.95em;
	color: #444;
	line-height: 1.6;
	margin-bottom: 15px;
}

.post-footer {
	display: flex;
	justify-content: flex-end;
	align-items: center;
	font-size: 0.85em;
	color: #777;
}

.post-footer img {
	width: 18px;
	height: 18px;
	margin-right: 5px;
	vertical-align: middle;
}

/* ìµœì‹ ìˆœ, ì¸ê¸°ìˆœ ë²„íŠ¼ */
#popularButton {
	color: #919191;
	background-color: #fdfdfd;
	border: none;
	font-family: Pretendard, sans-serif;
	letter-spacing: 1px;
}

#popularButton:hover {
	color: #62B0FF;
}

#popularButton.active {
	color: #62B0FF;
}

#latestButton {
	color: #919191;
	background-color: #fdfdfd;
	border: none;
	font-family: Pretendard, sans-serif;
	letter-spacing: 1px;
}

#latestButton:hover {
	color: #62B0FF;
}

#latestButton.active {
	color: #62B0FF;
}

/* ë¯¸ë””ì–´ ì¿¼ë¦¬ (ë°˜ì‘í˜• ë””ìì¸) */
/* ëª¨ë°”ì¼ í™”ë©´ì—ì„œëŠ” ì—¬ì „íˆ ì„¸ë¡œë¡œ ìŒ“ì´ë„ë¡ flex-wrap: wrap; ë˜ëŠ” flex-direction: column; ìœ ì§€í•´ì•¼ í•¨ */
@media ( max-width : 767.98px) {
    /* ì‚¬ì´ë“œë°”ì™€ ë©”ì¸ ì»¨í…ì¸  ë˜í¼ì˜ ë°˜ì‘í˜• ì²˜ë¦¬ */
    .main-content-wrapper {
        flex-direction: column; /* ëª¨ë°”ì¼ì—ì„œ ì‚¬ì´ë“œë°”ì™€ ë©”ì¸ ì½˜í…ì¸  ì„¸ë¡œë¡œ ìŒ“ì´ë„ë¡ */
        /* ì‚¬ì´ë“œë°”ê°€ fixedë‚˜ absoluteë¡œ ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´, ì‚¬ì´ë“œë°” ë„ˆë¹„ë§Œí¼ ì™¼ìª½ íŒ¨ë”© í•„ìš” */
    }
	.top-section {
		flex-direction: column;
		align-items: flex-end;
	}
	.search-input {
		width: 100%;
		max-width: none; /* ëª¨ë°”ì¼ì—ì„œ ê³ ì • ë„ˆë¹„ í•´ì œ */
		margin-bottom: 10px;
	}
	.action-buttons {
		width: 100%;
		justify-content: flex-end;
	}
	.button-base {
		flex-grow: 1; /* ë²„íŠ¼ì´ ê³µê°„ì„ ì±„ìš°ë„ë¡ */
	}
	.banner-section {
        /* ëª¨ë°”ì¼ì—ì„œëŠ” ì¤„ë°”ê¿ˆì„ í•´ì•¼ í•˜ë¯€ë¡œ ë‹¤ì‹œ wrapì„ ì£¼ê±°ë‚˜,
           flex-direction: column;ìœ¼ë¡œ í™•ì‹¤íˆ ì„¸ë¡œë¡œ ìŒ“ì´ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. */
		flex-direction: column; /* ëª¨ë°”ì¼ì—ì„œëŠ” ì„¸ë¡œë¡œ ìŒ“ì´ë„ë¡ */
		gap: 20px;
	}
	.banner-card,
    .banner-card-apt-talk,
    .banner-card-apt-ping {
		flex: 1 1 100%; /* ëª¨ë°”ì¼ì—ì„œëŠ” ê°ê° 100% ë„ˆë¹„ */
		min-width: unset; /* ìµœì†Œ ë„ˆë¹„ ì œí•œ í•´ì œ */
	}
	.banner-card-apt-ping {
		text-align: left;
	}
	
}
/* ìƒˆë¡œìš´ ì •ë ¬ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
.sort-buttons-container {
    display: flex; /* ë²„íŠ¼ë“¤ì„ Flexboxë¡œ ì •ë ¬ */
    justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ëìœ¼ë¡œ ì •ë ¬ */
    gap: 10px; /* ë²„íŠ¼ë“¤ ì‚¬ì´ì˜ ê°„ê²© */
    margin-bottom: 15px; /* ê²Œì‹œë¬¼ ëª©ë¡ê³¼ì˜ ê°„ê²© */
    margin-top: 15px; /* ìœ„ìª½ ìš”ì†Œì™€ì˜ ê°„ê²© (ì˜µì…˜) */
    padding-right: 15px; /* container-mainì˜ ì¢Œìš° íŒ¨ë”©ì„ ê³ ë ¤í•˜ì—¬ ì¡°ì ˆ */
}

/* ë¯¸ë””ì–´ ì¿¼ë¦¬ (ëª¨ë°”ì¼ ë°˜ì‘í˜•)ì—ì„œë„ ì •ë ¬ ë²„íŠ¼ ì»¨í…Œì´ë„ˆê°€ ì˜ ë³´ì´ë„ë¡ */
@media (max-width: 767.98px) {
    .sort-buttons-container {
        justify-content: flex-end; /* ëª¨ë°”ì¼ì—ì„œë„ ì˜¤ë¥¸ìª½ ì •ë ¬ ìœ ì§€ */
        padding-right: 15px; /* í•„ìš”í•œ ê²½ìš° íŒ¨ë”© ì¡°ì ˆ */
        margin-right: 0; /* ë¶ˆí•„ìš”í•œ ë§ˆì§„ ì œê±° */
    }
}


footer {
	background-color: #f2f2f2;
	padding: 15px 0;
	text-align: center;
	font-size: 14px;
	color: #666;
	width: 100%;
	flex-shrink: 0;
}
</style>
</head>
<body>

	<!-- ì‚¬ì´ë“œë°” -->
    <div th:replace="common/sidebar :: sidebar"></div>
    
    <div class="main-content-wrapper">
        <div class="container-main">
            <div class="top-section">
                <input type="text" class="search-input" placeholder="ê²Œì‹œë¬¼ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
                <div class="action-buttons">
					<button type="button" class="button-base button-outline" id="myActivityButton">ë‚´ í™œë™</button>
					<button type="button" class="button-base button-primary" id="writeButton">ê¸€ì“°ê¸°</button>
                </div>
            </div>

			<div class="banner-section">
			    <div class="banner-card banner-card-apt-talk">
			        <div class="text-content"> <h4>A.P.T í†¡</h4>
			            <p>
			                ìƒí™œë¹„ ì ˆì•½ íŒì„ ê³µìœ í•˜ê³ ,<br> ìš°ë¦¬ ì•„íŒŒíŠ¸ì˜ ë‹¤ì–‘í•œ ì´ì•¼ê¸°ë„ ë§Œë‚˜ë³´ì„¸ìš”
			            </p>
			        </div>
			        <img src="/icons/talk_icon.png" alt="A.P.T í†¡ ì´ë¯¸ì§€" class="apt-talk-large-icon">
			    </div>
			    <div class="banner-card banner-card-apt-ping">
			    	<a th:href="@{communutyPingMain}">
			        	<img src="/cards/APT_ping.png" alt="A.P.T í•‘ ì´ë¯¸ì§€" class="full-image-cover">
			        </a>
			    </div>
			</div>
			<div id="searchResultsInfo" style="display: none; margin-bottom: 15px; padding: 10px; background-color: #f8f9fa; border-radius: 8px; font-size: 14px; color: #666;"></div>
			<button id="clearSearch" style="display: none; margin-bottom: 15px; padding: 8px 15px; background-color: #f0f0f0; color: #666; border: none; border-radius: 4px; cursor: pointer;">ì „ì²´ë³´ê¸°</button>
			 <div class="sort-buttons-container">
                <button type="button" class="button-base button-outline" id="popularButton"
                    th:classappend="${orderBy == 'popularity' ? 'button-primary' : 'button-outline'}">ì¸ê¸°ìˆœ</button>
                <button type="button" class="button-base button-outline" id="latestButton"
                    th:classappend="${orderBy == 'latest' ? 'button-primary' : 'button-outline'}">ìµœì‹ ìˆœ</button>
                <button type="button" class="button-base button-outline" id="noticeButton">ê³µì§€ì‚¬í•­ë§Œ ë³´ê¸°</button>
            </div>
			<div id="post-container">
            <div class="post-list-section">
                <div class="post-card" th:each="post : ${postList}">
                    <div class="post-header">
                        <div class="post-profile-pic">
                            <img src="/icons/profile.png" alt="í”„ë¡œí•„ ì‚¬ì§„">
                        </div>
                        <div class="post-info">
                            <h5 th:text="${post.nickname}+'ë‹˜'">ì£¼í™©ë¨¸ë¦¬ ì—”ë‹˜</h5>
                            <p th:text="${post.apartmentName}">ì´ˆë¡ë§ˆì„ 5ë‹¨ì§€</p>
                        </div>
                        <span class="post-time" th:text="${#dates.format(post.publishedDate, 'yyyy-MM-dd''T''HH:mm:ss')}" th:attr="data-published-date=${#dates.format(post.publishedDate, 'yyyy-MM-dd''T''HH:mm:ss')}"></span>
                    </div>
                    <div class="post-content">
					    <p>
					        <a th:href="@{/communityDetail(boardNo=${post.boardNo})}" style="text-decoration: none; color: inherit;">
					            <strong th:text="${post.boardTitle}">ì•ˆë…•í•˜ì„¸ìš” ì´ë²ˆ ë‹¬ì— ìƒˆë¡œ ì…ì£¼í–ˆì–´ìš” ! ë°˜ê°€ì›Œìš”!</strong>
					        </a>
					    </p>
                    </div>
                    <div class="post-footer">
                        <img src="/icons/talk_bubble.png" alt="ëŒ“ê¸€ ì•„ì´ì½˜"> ëŒ“ê¸€ <span th:text="${post.commentCount}" style="margin-left: 4px">0</span>
                    </div>
                </div> 
                </div>
            </div>
        </div>
    </div>
    
    <!-- footer ì‹œì‘ -->
    <footer>
		<div>
			<p style="margin: 0;">Â© 2025 A.P.T. All rights reserved.</p>
			<p style="margin: 5px 0 0;">
				Made with <span class="computer-icon">ğŸ’»</span> by íŒ€ EF
			</p>
		</div>
	</footer>
	<!-- footer ë -->
	
	<!-- ìƒë‹¨ ë‚´ í™œë™, ê¸€ì“°ê¸° í´ë¦­ ì‹œ ì´ë™ ë¡œì§ -->
	<script th:inline="javascript">
		// ê¸°ì¡´ ì½”ë“œì— ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë˜, ëª¨ë“  ê¸°ì¡´ ê¸°ëŠ¥ì€ ìœ ì§€
		document.addEventListener('DOMContentLoaded', function() {
			
		    // ğŸ” ê²€ìƒ‰ ê´€ë ¨ ë³€ìˆ˜ë“¤
		    const searchInput = document.querySelector('.search-input');
		    const searchResultsInfo = document.getElementById('searchResultsInfo');
		    const clearSearchBtn = document.getElementById('clearSearch');
		    const postListSection = document.querySelector('.post-list-section');
		    
		    let allPosts = [];
		    let isSearchActive = false;
		    let originalPostsHTML = '';
		    
		    // ğŸ”§ ë¬´í•œìŠ¤í¬ë¡¤ ì œì–´ë¥¼ ìœ„í•œ ì „ì—­ ë³€ìˆ˜
		    window.isSearchActive = false; // ì „ì—­ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë¬´í•œìŠ¤í¬ë¡¤ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
		    
		    // ğŸ”§ ì•ˆì „í•œ ê²Œì‹œê¸€ ì €ì¥ í•¨ìˆ˜
		    function saveAllPosts() {
		        const checkAndSave = () => {
		            const postCards = document.querySelectorAll('.post-card');
		            console.log('ğŸ” í˜„ì¬ ì°¾ì€ ê²Œì‹œê¸€ ìˆ˜:', postCards.length);
		            
		            if (postCards.length === 0) {
		                console.log('â³ ê²Œì‹œê¸€ì´ ì—†ìŒ, 1ì´ˆ í›„ ì¬ì‹œë„...');
		                setTimeout(checkAndSave, 1000);
		                return;
		            }
		            
		            // ë¬´í•œìŠ¤í¬ë¡¤ë¡œ ì¶”ê°€ëœ ê²Œì‹œê¸€ë„ í¬í•¨í•˜ì—¬ ì €ì¥
		            const postContainer = document.getElementById('post-container');
		            const allPostCards = postContainer.querySelectorAll('.post-card');
		            
		            // ì›ë³¸ HTML ì €ì¥ (ì „ì²´ post-container ë‚´ìš©)
		            originalPostsHTML = postContainer.innerHTML;
		            console.log('âœ… ì›ë³¸ HTML ì €ì¥ ì™„ë£Œ (ì´ ' + allPostCards.length + 'ê°œ ê²Œì‹œê¸€)');
		            
		            // ê°œë³„ ê²Œì‹œê¸€ ì •ë³´ ì €ì¥
		            allPosts = Array.from(allPostCards).map((card, index) => {
		                let title = '';
		                
		                // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ì œëª© ì¶”ì¶œ
		                const titleElement1 = card.querySelector('.post-content strong');
		                const titleElement2 = card.querySelector('.post-content a strong');
		                
		                if (titleElement1) {
		                    title = titleElement1.textContent.trim();
		                } else if (titleElement2) {
		                    title = titleElement2.textContent.trim();
		                } else {
		                    const postContent = card.querySelector('.post-content');
		                    if (postContent) {
		                        // ë§í¬ í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œ
		                        const linkElement = postContent.querySelector('a');
		                        if (linkElement) {
		                            title = linkElement.textContent.trim();
		                        } else {
		                            title = postContent.textContent.trim();
		                        }
		                    }
		                }
		                
		                console.log(`ğŸ“ ê²Œì‹œê¸€ ${index + 1} ì œëª©:`, title);
		                
		                return {
		                    element: card.cloneNode(true),
		                    title: title
		                };
		            });
		            
		            console.log('âœ… ì´ ì €ì¥ëœ ê²Œì‹œê¸€:', allPosts.length);
		        };
		        
		        checkAndSave();
		    }
		    
		    // ğŸ” ê²€ìƒ‰ ì‹¤í–‰ í•¨ìˆ˜
		    function performSearch() {
		        const keyword = searchInput.value.trim();
		        console.log('ğŸ” ê²€ìƒ‰ ì‹œì‘ - í‚¤ì›Œë“œ:', keyword);
		        console.log('ğŸ” ì €ì¥ëœ ê²Œì‹œê¸€ ìˆ˜:', allPosts.length);
		        
		        if (!keyword) {
		            showAllPosts();
		            return;
		        }
		        
		        // ê²Œì‹œê¸€ì´ ì €ì¥ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë‹¤ì‹œ ì €ì¥ ì‹œë„
		        if (allPosts.length === 0) {
		            console.warn('âš ï¸ ì €ì¥ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì¬ì €ì¥ ì‹œë„...');
		            saveAllPosts();
		            setTimeout(() => {
		                if (allPosts.length > 0) {
		                    performSearch();
		                } else {
		                    alert('ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
		                }
		            }, 2000);
		            return;
		        }
		        
		        // ğŸ” ê²€ìƒ‰ ë¡œì§ - ì œëª©ì—ì„œ í‚¤ì›Œë“œê°€ í¬í•¨ëœ ê²Œì‹œê¸€ë§Œ í•„í„°ë§
		        const filteredPosts = allPosts.filter(post => {
		            if (!post.title) {
		                console.log('âŒ ì œëª©ì´ ì—†ëŠ” ê²Œì‹œê¸€:', post);
		                return false;
		            }
		            
		            // ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ì´ ê²€ìƒ‰
		            const normalizedTitle = post.title.toLowerCase();
		            const normalizedKeyword = keyword.toLowerCase();
		            
		            const matches = normalizedTitle.includes(normalizedKeyword);
		            
		            if (matches) {
		                console.log(`âœ… ë§¤ì¹­ë¨: "${post.title}" <- "${keyword}"`);
		            }
		            
		            return matches;
		        });
		        
		        console.log('ğŸ” ê²€ìƒ‰ ê²°ê³¼:', filteredPosts.length + 'ê°œ ê²Œì‹œê¸€ ì°¾ìŒ');
		        
		        // ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
		        showSearchResults(filteredPosts, keyword);
		        
		        // ê²€ìƒ‰ ìƒíƒœ í™œì„±í™” (ë¬´í•œìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”)
		        isSearchActive = true;
		        window.isSearchActive = true;
		        console.log('ğŸš« ë¬´í•œìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”ë¨');
		    }
		    
		    // ğŸ” ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ - ë§¤ì¹­ëœ ê²Œì‹œê¸€ë§Œ ë³´ì—¬ì£¼ê¸°
		    function showSearchResults(filteredPosts, keyword) {
		        console.log('ğŸ” ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ ì‹œì‘:', filteredPosts.length + 'ê°œ');
		        
		        // ğŸ”§ ì „ì²´ post-containerë¥¼ ì™„ì „íˆ ë¹„ìš°ê¸° (ë¬´í•œìŠ¤í¬ë¡¤ë¡œ ì¶”ê°€ëœ ê²ƒë„ í¬í•¨)
		        const postContainer = document.getElementById('post-container');
		        
		        // post-container ì „ì²´ ë‚´ìš©ì„ ì™„ì „íˆ ë¹„ìš°ê¸°
		        postContainer.innerHTML = '<div class="post-list-section"></div>';
		        const postListSection = postContainer.querySelector('.post-list-section');
		        
		        if (filteredPosts.length === 0) {
		            // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œ
		            postListSection.innerHTML = `
		                <div style="text-align: center; padding: 50px; color: #666; background-color: #f9f9f9; border-radius: 15px; margin: 20px 0;">
		                    <h3 style="color: #999; margin-bottom: 10px;">ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
		                    <p style="color: #777;">"<strong>${keyword}</strong>" ì™€ ì¼ì¹˜í•˜ëŠ” ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
		                    <p style="color: #777; font-size: 0.9em;">ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
		                </div>`;
		        } else {
		            // ê²€ìƒ‰ëœ ê²Œì‹œê¸€ë“¤ë§Œ í‘œì‹œ
		            console.log('âœ… ê²€ìƒ‰ëœ ê²Œì‹œê¸€ë“¤ì„ í‘œì‹œí•©ë‹ˆë‹¤...');
		            filteredPosts.forEach((post, index) => {
		                const postElement = post.element.cloneNode(true);
		                
		                // ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ…
		                const titleElement = postElement.querySelector('.post-content strong') || 
		                                   postElement.querySelector('.post-content a strong') ||
		                                   postElement.querySelector('.post-content a');
		                
		                if (titleElement) {
		                    const originalText = titleElement.textContent;
		                    const regex = new RegExp(`(${keyword})`, 'gi');
		                    const highlightedText = originalText.replace(regex, '<mark style="background-color: #ffeb3b; padding: 2px 4px; border-radius: 3px; font-weight: bold;">$1</mark>');
		                    titleElement.innerHTML = highlightedText;
		                    console.log(`ğŸ¯ ${index + 1}ë²ˆì§¸ ê²Œì‹œê¸€ í•˜ì´ë¼ì´íŒ… ì™„ë£Œ:`, originalText);
		                }
		                
		                postListSection.appendChild(postElement);
		            });
		            
		            // ì‹œê°„ ì •ë³´ ì—…ë°ì´íŠ¸
		            updateTimeElements();
		            console.log('âœ… ê²€ìƒ‰ëœ ê²Œì‹œê¸€ë“¤ í‘œì‹œ ì™„ë£Œ');
		        }
		        
		        // ê²€ìƒ‰ ê²°ê³¼ ì •ë³´ í‘œì‹œ
		        searchResultsInfo.style.display = 'block';
		        searchResultsInfo.innerHTML = `
		            <strong style="color: #62B0FF;">"${keyword}"</strong> ê²€ìƒ‰ ê²°ê³¼: 
		            <span style="color: #62B0FF; font-weight: bold;">${filteredPosts.length}ê°œ</span>ì˜ ê²Œì‹œê¸€ì´ ìˆìŠµë‹ˆë‹¤.
		        `;
		        clearSearchBtn.style.display = 'inline-block';
		        clearSearchBtn.textContent = 'ì „ì²´ë³´ê¸°';
		        
		        console.log('ğŸ” ê²€ìƒ‰ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
		        console.log('ğŸ§¹ post-container ì™„ì „íˆ ì •ë¦¬ë¨ - ê²€ìƒ‰ëœ ê²Œì‹œê¸€ë§Œ í‘œì‹œ');
		    }
		    
		    // ğŸ” ì „ì²´ë³´ê¸° ë³µì› - ëª¨ë“  ì›ë³¸ ê²Œì‹œê¸€ ë‹¤ì‹œ í‘œì‹œ
		    function showAllPosts() {
		        console.log('ğŸ”„ ì „ì²´ë³´ê¸° ì‹¤í–‰ - ì›ë³¸ ê²Œì‹œê¸€ë“¤ ë³µì› ì‹œì‘');
		        
		        const postContainer = document.getElementById('post-container');
		        
		        if (originalPostsHTML) {
		            // ğŸ”§ post-container ì „ì²´ë¥¼ ì›ë³¸ HTMLë¡œ ì™„ì „ ë³µì›
		            postContainer.innerHTML = originalPostsHTML;
		            console.log('âœ… ì›ë³¸ HTML ì™„ì „ ë³µì› ì™„ë£Œ');
		        } else if (allPosts.length > 0) {
		            // ë°±ì—… ë°©ë²•: ì €ì¥ëœ ê²Œì‹œê¸€ë“¤ë¡œ ë³µì›
		            console.log('ğŸ“¦ ì €ì¥ëœ ê²Œì‹œê¸€ë“¤ë¡œ ë³µì› ì‹œë„...');
		            postContainer.innerHTML = '<div class="post-list-section"></div>';
		            const postListSection = postContainer.querySelector('.post-list-section');
		            
		            allPosts.forEach((post, index) => {
		                const clonedPost = post.element.cloneNode(true);
		                
		                // í•˜ì´ë¼ì´íŒ… ì œê±° (ê²€ìƒ‰ì–´ ê°•ì¡° íš¨ê³¼ ì œê±°)
		                const highlightedElements = clonedPost.querySelectorAll('mark');
		                highlightedElements.forEach(el => {
		                    el.outerHTML = el.textContent;
		                });
		                
		                postListSection.appendChild(clonedPost);
		                console.log(`ğŸ“„ ${index + 1}ë²ˆì§¸ ê²Œì‹œê¸€ ë³µì›ë¨:`, post.title);
		            });
		            console.log('âœ… ì €ì¥ëœ ê²Œì‹œê¸€ë¡œ ë³µì› ì™„ë£Œ');
		        } else {
		            console.warn('âš ï¸ ë³µì›í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.');
		            alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.');
		            location.reload();
		            return;
		        }
		        
		        // ì‹œê°„ ì •ë³´ ì—…ë°ì´íŠ¸
		        updateTimeElements();
		        
		        // ê²€ìƒ‰ UI ì´ˆê¸°í™”
		        searchInput.value = '';
		        searchResultsInfo.style.display = 'none';
		        clearSearchBtn.style.display = 'none';
		        
		        // ê²€ìƒ‰ ìƒíƒœ ë¹„í™œì„±í™” (ë¬´í•œìŠ¤í¬ë¡¤ ì¬í™œì„±í™”)
		        isSearchActive = false;
		        window.isSearchActive = false;
		        
		        console.log('âœ… ì „ì²´ë³´ê¸° ë³µì› ì™„ë£Œ - ë¬´í•œìŠ¤í¬ë¡¤ ì¬í™œì„±í™”ë¨');
		        console.log('ğŸ“Š í˜„ì¬ í‘œì‹œëœ ê²Œì‹œê¸€ ìˆ˜:', document.querySelectorAll('.post-card').length);
		    }
		    
		    // ğŸ”§ ì‹œê°„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
		    function updateTimeElements() {
		        const postTimeElements = document.querySelectorAll('.post-time');
		        postTimeElements.forEach(function(element) {
		            const rawDateString = element.getAttribute('data-published-date');
		            if (rawDateString && typeof timeAgo === 'function') {
		                element.textContent = timeAgo(rawDateString);
		                element.style.visibility = 'visible';
		            }
		        });
		    }
		    
		    // ğŸ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
		    searchInput.addEventListener('keypress', function(e) {
		        if (e.key === 'Enter') {
		            e.preventDefault();
		            performSearch();
		        }
		    });
		    
		    searchInput.addEventListener('input', function() {
		        const keyword = this.value.trim();
		        if (keyword === '' && isSearchActive) {
		            showAllPosts();
		        }
		    });
		    
		    clearSearchBtn.addEventListener('click', function() {
		        showAllPosts();
		    });
		    
		    // ğŸ”§ ê²Œì‹œê¸€ ì €ì¥ ì´ˆê¸°í™” (ê¸°ì¡´ íƒ€ì´ë° ìœ ì§€)
		    setTimeout(() => {
		        saveAllPosts();
		    }, 1500);
		    
		    // ğŸ”§ ë¬´í•œìŠ¤í¬ë¡¤ì´ ê²Œì‹œê¸€ì„ ì¶”ê°€í•  ë•Œë§ˆë‹¤ ë‹¤ì‹œ ì €ì¥
		    const originalAppend = jQuery.fn.append;
		    jQuery.fn.append = function(...args) {
		        const result = originalAppend.apply(this, args);
		        
		        // post-containerì— ê²Œì‹œê¸€ì´ ì¶”ê°€ë˜ë©´ ë‹¤ì‹œ ì €ì¥
		        if (this.attr('id') === 'post-container' && args[0] && args[0].includes('post-card')) {
		            console.log('ğŸ”„ ë¬´í•œìŠ¤í¬ë¡¤ë¡œ ìƒˆ ê²Œì‹œê¸€ ì¶”ê°€ë¨ - ë‹¤ì‹œ ì €ì¥');
		            setTimeout(() => {
		                saveAllPosts();
		            }, 100);
		        }
		        
		        return result;
		    };
		    
		    window.addEventListener('load', function() {
		        setTimeout(() => {
		            if (allPosts.length === 0) {
		                console.log('ğŸ”„ window load ì´ë²¤íŠ¸ì—ì„œ ê²Œì‹œê¸€ ì¬ì €ì¥ ì‹œë„');
		                saveAllPosts();
		            }
		        }, 500);
		    });
		    
		    // ğŸ”§ ë””ë²„ê¹… í•¨ìˆ˜
		    window.debugSearch = {
		        getPosts: () => allPosts,
		        getOriginalHTML: () => originalPostsHTML,
		        reloadPosts: () => {
		            console.log('ğŸ”„ ìˆ˜ë™ìœ¼ë¡œ ê²Œì‹œê¸€ ì¬ì €ì¥ ì‹¤í–‰');
		            saveAllPosts();
		        },
		        testSearch: (keyword) => {
		            searchInput.value = keyword;
		            performSearch();
		        },
		        isActive: () => isSearchActive,
		        getCurrentPostCount: () => document.querySelectorAll('.post-card').length,
		        showPostTitles: () => {
		            const titles = allPosts.map(post => post.title);
		            console.log('ì €ì¥ëœ ê²Œì‹œê¸€ ì œëª©ë“¤:', titles);
		            return titles;
		        }
		    };
		    
		    console.log('ğŸ” ê²€ìƒ‰ ê¸°ëŠ¥ ì´ˆê¸°í™” ì™„ë£Œ');
		    console.log('ğŸ’¡ ë””ë²„ê¹… ëª…ë ¹ì–´:');
		    console.log('  - window.debugSearch.reloadPosts() : ê²Œì‹œê¸€ ë‹¤ì‹œ ì €ì¥');
		    console.log('  - window.debugSearch.getCurrentPostCount() : í˜„ì¬ ê²Œì‹œê¸€ ìˆ˜');
		    console.log('  - window.debugSearch.showPostTitles() : ì €ì¥ëœ ì œëª©ë“¤ ë³´ê¸°');
		    
		});
		

		// ğŸ”§ ê¸°ì¡´ JavaScript ì½”ë“œë“¤ì€ ì—¬ê¸°ë¶€í„° ê·¸ëŒ€ë¡œ ìœ ì§€

		/*<![CDATA[*/
		// Thymeleafë¥¼ ì‚¬ìš©í•˜ì—¬ JavaScript ë³€ìˆ˜ì— URL ì£¼ì…
		const myActivityUrl = /*[[@{/communityMy}]]*/ '/communityMy';
		const writePostUrl = /*[[@{/communityWrite}]]*/ '/communityWrite';
		const loginPageUrl = /*[[@{/sign}]]*/ '/sign';
		const currentOrderBy = /*[[${orderBy}]]*/ 'latest';

		// 'ë‚´ í™œë™' ë²„íŠ¼ í´ë¦­ ì‹œ
		document.getElementById('myActivityButton').addEventListener('click', function() {
		    window.location.href = myActivityUrl;
		});

		// 'ê¸€ì“°ê¸°' ë²„íŠ¼ í´ë¦­ ì‹œ
		document.getElementById('writeButton').addEventListener('click', function() {
		    const isLoggedIn = checkUserLoggedIn();

		    if (isLoggedIn) {
		        window.location.href = writePostUrl;
		    } else {
		        alert('ê¸€ì„ ì‘ì„±í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
		        window.location.href = loginPageUrl;
		    }
		});

		// â˜… ì •ë ¬ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		document.getElementById('popularButton').addEventListener('click', function() {
		    window.location.href = /*[[@{/communityMain(orderBy='popularity')}]]*/ '/communityMain?orderBy=popularity';
		});

		document.getElementById('latestButton').addEventListener('click', function() {
		    window.location.href = /*[[@{/communityMain(orderBy='latest')}]]*/ '/communityMain?orderBy=latest';
		});
		
		// ê³µì§€ì‚¬í•­ë§Œ ë³´ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
		function getNoticeOnlyFromUrl() {
		    const params = new URLSearchParams(window.location.search);
		    return params.get("noticeOnly") === "true";
		  }
		
		  document.addEventListener("DOMContentLoaded", function () {
		    const button = document.getElementById("noticeButton");
		
		    // í˜„ì¬ ìƒíƒœ í™•ì¸í•´ì„œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
		    const isNoticeOnly = getNoticeOnlyFromUrl();
		    button.textContent = isNoticeOnly ? "ì „ì²´ ê²Œì‹œê¸€ ë³´ê¸°" : "ê³µì§€ì‚¬í•­ë§Œ ë³´ê¸°";
		
		    button.addEventListener("click", function () {
		      const params = new URLSearchParams(window.location.search);
		      const orderBy = params.get("orderBy") || "latest";
		
		      // í˜„ì¬ ìƒíƒœì—ì„œ ë°˜ëŒ€ë¡œ ì´ë™
		      const newNoticeOnly = !getNoticeOnlyFromUrl();
		
		      // ì´ë™í•  URL êµ¬ì„±
		      const newUrl = `/communityMain?orderBy=${orderBy}&noticeOnly=${newNoticeOnly}`;
		      window.location.href = newUrl;
		    });
		  });

		// --- ê²Œì‹œë¬¼ ì‘ì„± ì‹œê°„ ìƒëŒ€ ì‹œê°„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ ---
		function timeAgo(date) {
		    const now = new Date();
		    const publishedDate = new Date(date);
		    const seconds = Math.floor((now - publishedDate) / 1000);

		    let interval = seconds / 31536000; // 1ë…„
		    if (interval > 1) {
		        return Math.floor(interval) + "ë…„ ì „";
		    }
		    interval = seconds / 2592000; // 1ê°œì›”
		    if (interval > 1) {
		        return Math.floor(interval) + "ê°œì›” ì „";
		    }
		    interval = seconds / 86400; // 1ì¼
		    if (interval > 1) {
		        return Math.floor(interval) + "ì¼ ì „";
		    }
		    interval = seconds / 3600; // 1ì‹œê°„
		    if (interval > 1) {
		        return Math.floor(interval) + "ì‹œê°„ ì „";
		    }
		    interval = seconds / 60; // 1ë¶„
		    if (interval > 1) {
		        return Math.floor(interval) + "ë¶„ ì „";
		    }
		    return Math.floor(seconds) + "ì´ˆ ì „";
		}

		// í˜ì´ì§€ ë¡œë“œ í›„ ëª¨ë“  ê²Œì‹œë¬¼ ì‹œê°„ ì—…ë°ì´íŠ¸
		document.addEventListener('DOMContentLoaded', function() {
		    const postTimeElements = document.querySelectorAll('.post-time');
		    postTimeElements.forEach(function(element) {
		        const rawDateString = element.getAttribute('data-published-date');
		        if (rawDateString) {
		            element.textContent = timeAgo(rawDateString);
		            element.style.visibility = 'visible';
		        } else {
		            element.style.visibility = 'visible'; 
		        }
		    });
		});

		// ë¡œê·¸ì¸ í™•ì¸ í•¨ìˆ˜
		function checkUserLoggedIn() {
		    return true; 
		}
		/*]]>*/

		// ğŸ”§ ìˆ˜ì •ëœ ë¬´í•œ ìŠ¤í¬ë¡¤ ë¡œì§ - ê²€ìƒ‰ ì¤‘ì¼ ë•Œ ë¹„í™œì„±í™” + ê²Œì‹œê¸€ ì¶”ê°€ ì‹œ ìë™ ì €ì¥
		let page = 2;
		let loading = false;

		$(window).scroll(function () {
		    // âœ… ê²€ìƒ‰ ì¤‘ì´ë©´ ë¬´í•œìŠ¤í¬ë¡¤ ì¤‘ë‹¨
		    if (loading || window.isSearchActive) {
		        return;
		    }
		    
		    if ($(window).scrollTop() + $(window).height() >= $(document).height() - 100) {
		        loading = true;
		        $.get("/community/posts", { page: page, orderBy: currentOrderBy, noticeOnly: /*[[${noticeOnly}]]*/ false
					 }, function (data) {
		            if (data.length > 0) {
		                data.forEach(post => {
		                    const formattedDate = new Date(post.publishedDate).toISOString();

		                    $('#post-container').append(`
		                        <div class="post-card">
		                            <div class="post-header">
		                                <div class="post-profile-pic">
		                                    <img src="/icons/profile.png" alt="í”„ë¡œí•„ ì‚¬ì§„">
		                                </div>
		                                <div class="post-info">
		                                    <h5>${post.nickname}ë‹˜</h5>
		                                    <p>${post.apartmentName}</p>
		                                </div>
		                                <span class="post-time" data-published-date="${formattedDate}">
		                                    ${timeAgo(formattedDate)} </span>
		                            </div>
		                            <div class="post-content">
		                                <p>
		                                    <a href="/communityDetail?boardNo=${post.boardNo}" style="text-decoration: none; color: inherit;">
		                                        <strong>${post.boardTitle}</strong>
		                                    </a>
		                                </p>
		                            </div>
		                            <div class="post-footer">
		                                <img src="/icons/talk_bubble.png" alt="ëŒ“ê¸€ ì•„ì´ì½˜"> ëŒ“ê¸€ ${post.commentCount}
		                            </div>
		                        </div>
		                    `);
		                });
		                
		                // ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ê²Œì‹œë¬¼ë“¤ì˜ ì‹œê°„ë„ ì—…ë°ì´íŠ¸
		                const newPostTimeElements = $('#post-container .post-card:not([data-time-processed]) .post-time');
		                newPostTimeElements.each(function() {
		                    const element = $(this);
		                    const rawDateString = element.attr('data-published-date');
		                    if (rawDateString) {
		                        element.text(timeAgo(rawDateString));
		                        element.css('visibility', 'visible');
		                        element.attr('data-time-processed', 'true');
		                    }
		                });
		                
		                // ğŸ”§ ìƒˆ ê²Œì‹œê¸€ì´ ì¶”ê°€ë˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ì €ì¥
		                console.log('ğŸ”„ ë¬´í•œìŠ¤í¬ë¡¤ë¡œ ' + data.length + 'ê°œ ê²Œì‹œê¸€ ì¶”ê°€ë¨ - ê²€ìƒ‰ìš© ë°ì´í„° ì—…ë°ì´íŠ¸');
		                setTimeout(() => {
		                    if (typeof window.debugSearch !== 'undefined' && window.debugSearch.reloadPosts) {
		                        window.debugSearch.reloadPosts();
		                    }
		                }, 200);
		                
		                page++;
		                loading = false;
		            } else {
		                loading = true;
		            }
		        });
		    }
		});
</script>
	
</body>
</html>